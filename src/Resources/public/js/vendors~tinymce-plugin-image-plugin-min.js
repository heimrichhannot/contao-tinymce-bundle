(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~tinymce-plugin-image-plugin-min"],{

/***/ "./node_modules/tinymce/plugins/image/plugin.min.js":
/*!**********************************************************!*\
  !*** ./node_modules/tinymce/plugins/image/plugin.min.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.4.2 (2020-08-17)
 */
!function(m){"use strict";var e,t,n,r,o,a=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(){},l=function(e){return function(){return e}},s=l(!1),u=l(!0),c=function(){return d},d=(e=function(e){return e.isNone()},{fold:function(e,t){return e()},is:s,isSome:s,isNone:u,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(undefined),or:n,orThunk:t,map:c,each:i,bind:c,exists:s,forall:u,filter:c,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")}),g=function(n){var e=l(n),t=function(){return a},r=function(e){return e(n)},a={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:u,isNone:s,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return g(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?a:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(s,function(e){return t(n,e)})}};return a},A={some:g,none:c,from:function(e){return null===e||e===undefined?d:g(e)}},f=function(r){return function(e){return n=typeof(t=e),(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===r;var t,n}},p=function(t){return function(e){return typeof e===t}},S=f("string"),h=f("object"),b=f("array"),v=(r=null,function(e){return r===e}),y=p("boolean"),w=p("number"),D=Array.prototype.push,x=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!b(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);D.apply(t,e[n])}return t},T=Object.prototype.hasOwnProperty,C=(o=function(e,t){return h(e)&&h(t)?C(e,t):t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var a=e[r];for(var i in a)T.call(a,i)&&(n[i]=o(n[i],a[i]))}return n}),U=function(){return(U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},O=("undefined"!=typeof m.window?m.window:Function("return this;")(),function(e,t,n){!function(e,t,n){if(!(S(n)||y(n)||w(n)))throw m.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom(),t,n)}),I=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:l(e)}},N={fromHtml:function(e,t){var n=(t||m.document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw m.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return I(n.childNodes[0])},fromTag:function(e,t){var n=(t||m.document).createElement(e);return I(n)},fromText:function(e,t){var n=(t||m.document).createTextNode(e);return I(n)},fromDom:I,fromPoint:function(e,t,n){var r=e.dom();return A.from(r.elementFromPoint(t,n)).map(I)}},P=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),L=tinymce.util.Tools.resolve("tinymce.util.Promise"),_=tinymce.util.Tools.resolve("tinymce.util.XHR"),E=function(e){return e.getParam("image_dimensions",!0,"boolean")},M=function(e){return e.getParam("images_upload_url","","string")},R=function(e){return e.getParam("images_upload_handler",undefined,"function")},z=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},H=function(e){return e=e&&e.replace(/px$/,"")},k=function(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e},j=function(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},B=function(e){return"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder"))},F=P.DOM,G=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?H(e.style.marginLeft):""},W=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?H(e.style.marginTop):""},q=function(e){return e.style.borderWidth?H(e.style.borderWidth):""},$=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},J=function(e,t){return e.style[t]?e.style[t]:""},X=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},V=function(e,t,n){""===n?e.removeAttribute(t):e.setAttribute(t,n)},K=function(e){var t,n,r,a;X(e)?(a=(r=e).parentNode,F.insertAfter(r,a),F.remove(a)):(t=e,n=F.create("figure",{"class":"image"}),F.insertAfter(n,t),n.appendChild(t),n.appendChild(F.create("figcaption",{contentEditable:"true"},"Caption")),n.contentEditable="false")},Z=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");0<r.length?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},Q=function(e,r){return function(e,t,n){e.style[t]?(e.style[t]=k(n),Z(e,r)):V(e,t,n)}},Y=function(e,t){return e.style[t]?H(e.style[t]):$(e,t)},ee=function(e,t){var n=k(t);e.style.marginLeft=n,e.style.marginRight=n},te=function(e,t){var n=k(t);e.style.marginTop=n,e.style.marginBottom=n},ne=function(e,t){var n=k(t);e.style.borderWidth=n},re=function(e,t){e.style.borderStyle=t},ae=function(e){return"FIGURE"===e.nodeName},ie=function(e){return 0===F.getAttrib(e,"alt").length&&"presentation"===F.getAttrib(e,"role")},oe=function(){return{src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},le=function(e,t){var n=m.document.createElement("img");return V(n,"style",t.style),!G(n)&&""===t.hspace||ee(n,t.hspace),!W(n)&&""===t.vspace||te(n,t.vspace),!q(n)&&""===t.border||ne(n,t.border),!J(n,"borderStyle")&&""===t.borderStyle||re(n,t.borderStyle),e(n.getAttribute("style"))},se=function(e,t){return{src:$(t,"src"),alt:ie(n=t)?"":$(n,"alt"),title:$(t,"title"),width:Y(t,"width"),height:Y(t,"height"),"class":$(t,"class"),style:e($(t,"style")),caption:X(t),hspace:G(t),vspace:W(t),border:q(t),borderStyle:J(t,"borderStyle"),isDecorative:ie(t)};var n},ue=function(e,t,n,r,a){n[r]!==t[r]&&a(e,r,n[r])},ce=function(e,t,n){if(n){F.setAttrib(e,"role","presentation");var r=N.fromDom(e);O(r,"alt","")}else{if(v(t)){r=N.fromDom(e);a="alt",r.dom().removeAttribute(a)}else{r=N.fromDom(e);O(r,"alt",t)}"presentation"===F.getAttrib(e,"role")&&F.setAttrib(e,"role","")}var a},me=function(r,a){return function(e,t,n){r(e,n),Z(e,a)}},de=function(e,t,n){var r,a,i,o=se(e,n);ue(n,o,t,"caption",function(e,t,n){return K(e)}),ue(n,o,t,"src",V),ue(n,o,t,"title",V),ue(n,o,t,"width",Q(0,e)),ue(n,o,t,"height",Q(0,e)),ue(n,o,t,"class",V),ue(n,o,t,"style",me(function(e,t){return V(e,"style",t)},e)),ue(n,o,t,"hspace",me(ee,e)),ue(n,o,t,"vspace",me(te,e)),ue(n,o,t,"border",me(ne,e)),ue(n,o,t,"borderStyle",me(re,e)),r=n,a=o,(i=t).alt===a.alt&&i.isDecorative===a.isDecorative||ce(r,i.alt,i.isDecorative)},ge=function(e,t){var n=e.dom.styles.parse(t),r=j(n),a=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(a)},fe=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||B(t))?null:t},pe=function(t,e){var n=t.dom,r=n.getParent(e.parentNode,function(e){return!!t.schema.getTextBlockElements()[e.nodeName]},t.getBody());return r?n.split(r,e):e},he=function(t,e){var n=function(e,t){var n=m.document.createElement("img");if(de(e,U(U({},t),{caption:!1}),n),ce(n,t.alt,t.isDecorative),t.caption){var r=F.create("figure",{"class":"image"});return r.appendChild(n),r.appendChild(F.create("figcaption",{contentEditable:"true"},"Caption")),r.contentEditable="false",r}return n}(function(e){return ge(t,e)},e);t.dom.setAttrib(n,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(n.outerHTML);var r=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(r,"data-mce-id",null),ae(r)){var a=pe(t,r);t.selection.select(a)}else t.selection.select(r)},be=function(t,e){var n,r,a,i,o,l=fe(t);if(de(function(e){return ge(t,e)},e,l),n=l,t.dom.setAttrib(n,"src",n.getAttribute("src")),ae(l.parentNode)){var s=l.parentNode;pe(t,s),t.selection.select(l.parentNode)}else t.selection.select(l),r=t,a=e,o=function(){i.onload=i.onerror=null,r.selection&&(r.selection.select(i),r.nodeChanged())},(i=l).onload=function(){a.width||a.height||!E(r)||r.dom.setAttribs(i,{width:String(i.clientWidth),height:String(i.clientHeight)}),o()},i.onerror=o},ve=tinymce.util.Tools.resolve("tinymce.util.Tools"),ye=function(e){return S(e.value)?e.value:""},we=function(e,a){var i=[];return ve.each(e,function(e){var t=S(e.text)?e.text:S(e.title)?e.title:"";if(e.menu!==undefined){var n=we(e.menu,a);i.push({text:t,items:n})}else{var r=a(e);i.push({text:t,value:r})}}),i},De=function(t){return void 0===t&&(t=ye),function(e){return e?A.from(e).map(function(e){return we(e,t)}):A.none()}},Ae=function(e,n){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return A.none()}(e,function(e){return t=e,Object.prototype.hasOwnProperty.call(t,"items")?Ae(e.items,n):e.value===n?A.some(e):A.none();var t})},Se=De,xe=function(e){return De(ye)(e)},Te=function(e,t){return e.bind(function(e){return Ae(e,t)})};function Ce(o){var t=function(e,r,a,t){var i=new m.XMLHttpRequest;i.open("POST",o.url),i.withCredentials=o.credentials,i.upload.onprogress=function(e){t(e.loaded/e.total*100)},i.onerror=function(){a("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=function(){if(i.status<200||300<=i.status)a("HTTP Error: "+i.status);else{var e,t,n=JSON.parse(i.responseText);if(n&&"string"==typeof n.location)r((e=o.basePath,t=n.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t));else a("Invalid JSON: "+i.responseText)}};var n=new m.FormData;n.append("file",e.blob(),e.filename()),i.send(n)};return o=ve.extend({credentials:!1,handler:t},o),{upload:function(e){return o.url||o.handler!==t?(r=e,a=o.handler,new L(function(e,t){try{a(r,e,t,i)}catch(n){t(n.message)}})):L.reject("Upload url missing from the settings.");var r,a}}}var Ue=function(e){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Oe=function(r){var t,e,a=Se(function(e){return r.convertURL(e.value||e.url,"src")}),n=new L(function(t){var n,e;n=function(e){t(a(e).map(function(e){return x([[{text:"None",value:""}],e])}))},"string"==typeof(e=r.getParam("image_list",!1))?_.send({url:e,success:function(e){n(JSON.parse(e))}}):"function"==typeof e?e(n):n(e)}),i=xe(r.getParam("image_class_list")),o=r.getParam("image_advtab",!1,"boolean"),l=r.getParam("image_uploadtab",!0,"boolean"),s=!!M(r),u=!!R(r),c=(e=fe(t=r))?se(function(e){return ge(t,e)},e):oe(),m=r.getParam("image_description",!0,"boolean"),d=r.getParam("image_title",!1,"boolean"),g=E(r),f=r.getParam("image_caption",!1,"boolean"),p=r.getParam("a11y_advanced_options",!1,"boolean"),h=M(r),b=r.getParam("images_upload_base_path",undefined,"string"),v=r.getParam("images_upload_credentials",!1,"boolean"),y=R(r),w=r.getParam("automatic_uploads",!0,"boolean"),D=A.some(r.getParam("image_prepend_url","","string")).filter(function(e){return S(e)&&0<e.length});return n.then(function(e){return{image:c,imageList:e,classList:i,hasAdvTab:o,hasUploadTab:l,hasUploadUrl:s,hasUploadHandler:u,hasDescription:m,hasImageTitle:d,hasDimensions:g,hasImageCaption:f,url:h,basePath:b,credentials:v,handler:y,prependURL:D,hasAccessibilityOptions:p,automaticUploads:w}})},Ie=function(e){var t=e.imageList.map(function(e){return{name:"images",type:"selectbox",label:"Image list",items:e}}),n={name:"alt",type:"input",label:"Alternative description",disabled:e.hasAccessibilityOptions&&e.image.isDecorative},r=e.classList.map(function(e){return{name:"classes",type:"selectbox",label:"Class",items:e}});return x([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:x([r.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])},Ne=function(e){return{title:"General",name:"general",items:Ie(e)}},Pe=Ie,Le=function(e){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},_e=function(e){return{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e["class"],caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}},Ee=function(e,t){return{src:e.src.value,alt:0===e.alt.length&&t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,"class":e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}},Me=function(e,t){var n,r,a=t.getData();n=e,r=a.src.value,(/^(?:[a-zA-Z]+:)?\/\//.test(r)?A.none():n.prependURL.bind(function(e){return r.substring(0,e.length)!==e?A.some(e+r):A.none()})).each(function(e){t.setData({src:{value:e,meta:a.src.meta}})})},Re=function(e,t){var n,r,a,i=t.getData(),o=i.src.meta;if(o!==undefined){var l=C({},i);r=l,a=o,(n=e).hasDescription&&S(a.alt)&&(r.alt=a.alt),n.hasAccessibilityOptions&&(r.isDecorative=a.isDecorative||r.isDecorative||!1),n.hasImageTitle&&S(a.title)&&(r.title=a.title),n.hasDimensions&&(S(a.width)&&(r.dimensions.width=a.width),S(a.height)&&(r.dimensions.height=a.height)),S(a["class"])&&Te(n.classList,a["class"]).each(function(e){r.classes=e.value}),n.hasImageCaption&&y(a.caption)&&(r.caption=a.caption),n.hasAdvTab&&(S(a.style)&&(r.style=a.style),S(a.vspace)&&(r.vspace=a.vspace),S(a.border)&&(r.border=a.border),S(a.hspace)&&(r.hspace=a.hspace),S(a.borderstyle)&&(r.borderstyle=a.borderstyle)),t.setData(l)}},ze=function(e,t,n,r){var a,i,o,l,s,u,c,m,d,g,f,p;Me(t,r),Re(t,r),a=e,i=t,o=n,s=(l=r).getData(),u=s.src.value,(c=s.src.meta||{}).width||c.height||!i.hasDimensions||a.imageSize(u).then(function(e){o.open&&l.setData({dimensions:e})}),m=t,d=n,f=(g=r).getData(),p=Te(m.imageList,f.src.value),d.prevImage=p,g.setData({images:p.map(function(e){return e.value}).getOr("")})},He=function(e,t,n){var r,a,i,o,l,s=j(e(n.style)),u=C({},n);return u.vspace=(r=s)["margin-top"]&&r["margin-bottom"]&&r["margin-top"]===r["margin-bottom"]?H(String(r["margin-top"])):"",u.hspace=(a=s)["margin-right"]&&a["margin-left"]&&a["margin-right"]===a["margin-left"]?H(String(a["margin-right"])):"",u.border=(i=s)["border-width"]?H(String(i["border-width"])):"",u.borderstyle=(o=s)["border-style"]?String(o["border-style"]):"",u.style=(l=t)(e(l(s))),u},ke=function(s,u,t,c){var e,n=c.getData();c.block("Uploading image"),(0===(e=n.fileinput).length?A.none():A.some(e[0])).fold(function(){c.unblock()},function(n){var r,a=m.URL.createObjectURL(n),i=Ce({url:u.url,basePath:u.basePath,credentials:u.credentials,handler:u.handler}),o=function(){c.unblock(),m.URL.revokeObjectURL(a)},l=function(e){c.setData({src:{value:e,meta:{}}}),c.showTab("general"),ze(s,u,t,c)};r=n,new L(function(e,t){var n=new m.FileReader;n.onload=function(){e(n.result)},n.onerror=function(){t(n.error.message)},n.readAsDataURL(r)}).then(function(e){var t=s.createBlobCache(n,a,e);u.automaticUploads?i.upload(t).then(function(e){l(e),o()})["catch"](function(e){o(),s.alertErr(e)}):(s.addToBlobCache(t),l(t.blobUri()),c.unblock())})})},je=function(h,b,v){return function(e,t){var n,r,a,i,o,l,s,u,c,m,d,g,f,p;"src"===t.name?ze(h,b,v,e):"images"===t.name?(c=h,m=b,d=v,f=(g=e).getData(),(p=Te(m.imageList,f.images)).each(function(e){""===f.alt||d.prevImage.map(function(e){return e.text===f.alt}).getOr(!1)?""===e.value?g.setData({src:e,alt:d.prevAlt}):g.setData({src:e,alt:e.text}):g.setData({src:e})}),d.prevImage=p,ze(c,m,d,g)):"alt"===t.name?v.prevAlt=e.getData().alt:"style"===t.name?(o=h,s=(l=e).getData(),u=He(o.parseStyle,o.serializeStyle,s),l.setData(u)):"vspace"===t.name||"hspace"===t.name||"border"===t.name||"borderstyle"===t.name?(n=h,r=e,a=C(_e(b.image),r.getData()),i=le(n.normalizeCss,Ee(a,!1)),r.setData({style:i})):"fileinput"===t.name?ke(h,b,v,e):"isDecorative"===t.name&&(e.getData().isDecorative?e.disable("alt"):e.enable("alt"))}},Be=function(i){return function(e){var t,n,r,a={prevImage:Te((t=e).imageList,t.image.src),prevAlt:t.image.alt,open:!0};return{title:"Insert/Edit Image",size:"normal",body:(r=e).hasAdvTab||r.hasUploadUrl||r.hasUploadHandler?{type:"tabpanel",tabs:x([[Ne(r)],r.hasAdvTab?[Ue(r)]:[],r.hasUploadTab&&(r.hasUploadUrl||r.hasUploadHandler)?[Le(r)]:[]])}:{type:"panel",items:Pe(r)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:_e(e.image),onSubmit:i.onSubmit(e),onChange:je(i,e,a),onClose:(n=a,function(){n.open=!1})}}},Fe=function(t){return function(e){return a=t.documentBaseURI.toAbsolute(e),new L(function(t){var n=m.document.createElement("img"),r=function(e){n.parentNode&&n.parentNode.removeChild(n),t(e)};n.onload=function(){var e={width:z(n.width,n.clientWidth),height:z(n.height,n.clientHeight)};r(L.resolve(e))},n.onerror=function(){r(L.reject("Failed to get image dimensions for: "+a))};var e=n.style;e.visibility="hidden",e.position="fixed",e.bottom=e.left="0px",e.width=e.height="auto",m.document.body.appendChild(n),n.src=a}).then(function(e){return{width:String(e.width),height:String(e.height)}});var a}},Ge=function(t){var n,r,a,i,o,l,s,e={onSubmit:function(n){return function(e){var t=C(_e(n.image),e.getData());s.execCommand("mceUpdateImage",!1,Ee(t,n.hasAccessibilityOptions)),s.editorUpload.uploadImagesAuto(),e.close()}},imageSize:Fe(s=t),addToBlobCache:function(e){l.editorUpload.blobCache.add(e)},createBlobCache:function(e,t,n){return o.editorUpload.blobCache.create({blob:e,blobUri:t,name:e.name?e.name.replace(/\.[^\.]+$/,""):null,base64:n.split(",")[1]})},alertErr:function(e){i.windowManager.alert(e)},normalizeCss:function(e){return ge(a,e)},parseStyle:function(e){return r.dom.parseStyle(e)},serializeStyle:(n=r=a=i=o=l=t,function(e,t){return n.dom.serializeStyle(e,t)})},u=function(){return Oe(t).then(Be(e)).then(function(e){return t.windowManager.open(e)})};return{open:u,openLater:function(){u()}}},We=function(n){n.addCommand("mceImage",Ge(n).openLater),n.addCommand("mceUpdateImage",function(e,t){n.undoManager.transact(function(){return function(t,e){var n=fe(t);if(n){var r=se(function(e){return ge(t,e)},n),a=U(U({},r),e);a.src?be(t,a):function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(t,n)}else e.src&&he(t,U(U({},oe()),e))}(n,t)})})},qe=function(i){return function(e){for(var t,n=e.length,r=function(e){e.attr("contenteditable",i?"true":null)};n--;){var a=e[n];(t=a.attr("class"))&&/\bimage\b/.test(t)&&(a.attr("contenteditable",i?"false":null),ve.each(a.getAll("figcaption"),r))}}};!function $e(){a.add("image",function(e){var t,n;(t=e).on("PreInit",function(){t.parser.addNodeFilter("figure",qe(!0)),t.serializer.addNodeFilter("figure",qe(!1))}),(n=e).ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ge(n).openLater,onSetup:function(e){return n.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),n.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ge(n).openLater}),n.ui.registry.addContextMenu("image",{update:function(e){return ae(e)||"IMG"===e.nodeName&&!B(e)?["image"]:[]}}),We(e)})}()}(window);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGlueW1jZS9wbHVnaW5zL2ltYWdlL3BsdWdpbi5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsYUFBYSxrRkFBa0YsZUFBZSxrQkFBa0IsVUFBVSw4QkFBOEIsU0FBUyxrQkFBa0Isa0JBQWtCLEVBQUUsbUJBQW1CLFdBQVcsNENBQTRDLFNBQVMsMEJBQTBCLFdBQVcsc0JBQXNCLHNEQUFzRCxtSkFBbUosU0FBUyxzQkFBc0IsZ0JBQWdCLHdCQUF3QixTQUFTLGVBQWUsWUFBWSxJQUFJLG1CQUFtQixZQUFZLGdCQUFnQixhQUFhLCtHQUErRyxlQUFlLGtCQUFrQixLQUFLLDZDQUE2QyxnQkFBZ0Isb0JBQW9CLFVBQVUscUJBQXFCLG9CQUFvQixvQkFBb0IsZUFBZSx1QkFBdUIsNEJBQTRCLGNBQWMsSUFBSSxTQUFTLElBQUksK0JBQStCLHVDQUF1QyxlQUFlLG1CQUFtQiwwUEFBMFAsU0FBUyxlQUFlLG1CQUFtQixxQkFBcUIsZ0VBQWdFLGFBQWEsb0VBQW9FLDRCQUE0QixJQUFJLEtBQUssa0ZBQWtGLGdCQUFnQixTQUFTLHNEQUFzRCwyQkFBMkIsWUFBWSwwQ0FBMEMsV0FBVyxzQkFBc0IsNERBQTRELFlBQVksS0FBSyxXQUFXLEtBQUssV0FBVyxnREFBZ0QsU0FBUyxlQUFlLG9DQUFvQyxpQ0FBaUMsSUFBSSx1RkFBdUYsU0FBUyx3QkFBd0IsZ0VBQWdFLHFCQUFxQixpQkFBaUIsMkpBQTJKLHVCQUF1QixjQUFjLGdCQUFnQiwrRUFBK0UsT0FBTyxVQUFVLElBQUksdUJBQXVCLDJDQUEyQywyS0FBMkssMEJBQTBCLHVCQUF1Qix1Q0FBdUMsWUFBWSx3QkFBd0Isd0NBQXdDLFlBQVkscUNBQXFDLGNBQWMsK0NBQStDLDBLQUEwSyxtREFBbUQsZUFBZSxtREFBbUQsZUFBZSxnRUFBZ0UsaUJB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OEgsbUJBQW1CLE9BQU8sK0NBQStDLEVBQUUsT0FBTyxnQkFBZ0IscUJBQXFCLHFCQUFxQixtQkFBbUIsaUNBQWlDLGdIQUFnSCw4Q0FBOEMsZ0NBQWdDLGlDQUFpQyx3Q0FBd0Msd0ZBQXdGLEVBQUUsc0JBQXNCLHlCQUF5QiwwQkFBMEIsZUFBZSx3QkFBd0IsMkJBQTJCLDZDQUE2QyxpQ0FBaUMsRUFBRSxjQUFjLDBDQUEwQywrQkFBK0IsR0FBRyxPQUFPLDRCQUE0QixNQUFNLGdCQUFnQixxRkFBcUYsa0NBQWtDLHFCQUFxQixZQUFZLE1BQU0scUJBQXFCLGVBQWUsWUFBWSxPQUFPLDRCQUE0QixNQUFNLDJEQUEyRCwwSEFBMEgsTUFBTSx1QkFBdUIsV0FBVyxNQUFNLEVBQUUsRUFBRSxnQkFBZ0IsbUJBQW1CLG1DQUFtQyx5Q0FBeUMsSUFBSSxFQUFFLFdBQVcsMEhBQTBILGVBQWUsMEJBQTBCLFFBQVEsOEJBQThCLG9GQUFvRiw2Q0FBNkMsc0ZBQXNGLG1JQUFtSSxxQ0FBcUMsc0RBQXNELHdDQUF3QyxtQkFBbUIsc0RBQXNELFFBQVEsRUFBRSxHQUFHLFMiLCJmaWxlIjoidmVuZG9yc350aW55bWNlLXBsdWdpbi1pbWFnZS1wbHVnaW4tbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIFRpbnkgVGVjaG5vbG9naWVzLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTEdQTCBvciBhIGNvbW1lcmNpYWwgbGljZW5zZS5cbiAqIEZvciBMR1BMIHNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICogRm9yIGNvbW1lcmNpYWwgbGljZW5zZXMgc2VlIGh0dHBzOi8vd3d3LnRpbnkuY2xvdWQvXG4gKlxuICogVmVyc2lvbjogNS40LjIgKDIwMjAtMDgtMTcpXG4gKi9cbiFmdW5jdGlvbihtKXtcInVzZSBzdHJpY3RcIjt2YXIgZSx0LG4scixvLGE9dGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoXCJ0aW55bWNlLlBsdWdpbk1hbmFnZXJcIiksaT1mdW5jdGlvbigpe30sbD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19LHM9bCghMSksdT1sKCEwKSxjPWZ1bmN0aW9uKCl7cmV0dXJuIGR9LGQ9KGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNOb25lKCl9LHtmb2xkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUoKX0saXM6cyxpc1NvbWU6cyxpc05vbmU6dSxnZXRPcjpuPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxnZXRPclRodW5rOnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUoKX0sZ2V0T3JEaWU6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGV8fFwiZXJyb3I6IGdldE9yRGllIGNhbGxlZCBvbiBub25lLlwiKX0sZ2V0T3JOdWxsOmwobnVsbCksZ2V0T3JVbmRlZmluZWQ6bCh1bmRlZmluZWQpLG9yOm4sb3JUaHVuazp0LG1hcDpjLGVhY2g6aSxiaW5kOmMsZXhpc3RzOnMsZm9yYWxsOnUsZmlsdGVyOmMsZXF1YWxzOmUsZXF1YWxzXzplLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bXX0sdG9TdHJpbmc6bChcIm5vbmUoKVwiKX0pLGc9ZnVuY3Rpb24obil7dmFyIGU9bChuKSx0PWZ1bmN0aW9uKCl7cmV0dXJuIGF9LHI9ZnVuY3Rpb24oZSl7cmV0dXJuIGUobil9LGE9e2ZvbGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChuKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuIG49PT1lfSxpc1NvbWU6dSxpc05vbmU6cyxnZXRPcjplLGdldE9yVGh1bms6ZSxnZXRPckRpZTplLGdldE9yTnVsbDplLGdldE9yVW5kZWZpbmVkOmUsb3I6dCxvclRodW5rOnQsbWFwOmZ1bmN0aW9uKGUpe3JldHVybiBnKGUobikpfSxlYWNoOmZ1bmN0aW9uKGUpe2Uobil9LGJpbmQ6cixleGlzdHM6cixmb3JhbGw6cixmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUobik/YTpkfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW25dfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwic29tZShcIituK1wiKVwifSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXMobil9LGVxdWFsc186ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5mb2xkKHMsZnVuY3Rpb24oZSl7cmV0dXJuIHQobixlKX0pfX07cmV0dXJuIGF9LEE9e3NvbWU6Zyxub25lOmMsZnJvbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWV8fGU9PT11bmRlZmluZWQ/ZDpnKGUpfX0sZj1mdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG49dHlwZW9mKHQ9ZSksKG51bGw9PT10P1wibnVsbFwiOlwib2JqZWN0XCI9PW4mJihBcnJheS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KXx8dC5jb25zdHJ1Y3RvciYmXCJBcnJheVwiPT09dC5jb25zdHJ1Y3Rvci5uYW1lKT9cImFycmF5XCI6XCJvYmplY3RcIj09biYmKFN0cmluZy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KXx8dC5jb25zdHJ1Y3RvciYmXCJTdHJpbmdcIj09PXQuY29uc3RydWN0b3IubmFtZSk/XCJzdHJpbmdcIjpuKT09PXI7dmFyIHQsbn19LHA9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZT09PXR9fSxTPWYoXCJzdHJpbmdcIiksaD1mKFwib2JqZWN0XCIpLGI9ZihcImFycmF5XCIpLHY9KHI9bnVsbCxmdW5jdGlvbihlKXtyZXR1cm4gcj09PWV9KSx5PXAoXCJib29sZWFuXCIpLHc9cChcIm51bWJlclwiKSxEPUFycmF5LnByb3RvdHlwZS5wdXNoLHg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MCxyPWUubGVuZ3RoO248cjsrK24pe2lmKCFiKGVbbl0pKXRocm93IG5ldyBFcnJvcihcIkFyci5mbGF0dGVuIGl0ZW0gXCIrbitcIiB3YXMgbm90IGFuIGFycmF5LCBpbnB1dDogXCIrZSk7RC5hcHBseSh0LGVbbl0pfXJldHVybiB0fSxUPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksQz0obz1mdW5jdGlvbihlLHQpe3JldHVybiBoKGUpJiZoKHQpP0MoZSx0KTp0fSxmdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksdD0wO3Q8ZS5sZW5ndGg7dCsrKWVbdF09YXJndW1lbnRzW3RdO2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBtZXJnZSB6ZXJvIG9iamVjdHNcIik7Zm9yKHZhciBuPXt9LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGE9ZVtyXTtmb3IodmFyIGkgaW4gYSlULmNhbGwoYSxpKSYmKG5baV09byhuW2ldLGFbaV0pKX1yZXR1cm4gbn0pLFU9ZnVuY3Rpb24oKXtyZXR1cm4oVT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0xLHI9YXJndW1lbnRzLmxlbmd0aDtuPHI7bisrKWZvcih2YXIgYSBpbiB0PWFyZ3VtZW50c1tuXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxhKSYmKGVbYV09dFthXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LE89KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtLndpbmRvdz9tLndpbmRvdzpGdW5jdGlvbihcInJldHVybiB0aGlzO1wiKSgpLGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0LG4pe2lmKCEoUyhuKXx8eShuKXx8dyhuKSkpdGhyb3cgbS5jb25zb2xlLmVycm9yKFwiSW52YWxpZCBjYWxsIHRvIEF0dHIuc2V0LiBLZXkgXCIsdCxcIjo6IFZhbHVlIFwiLG4sXCI6OiBFbGVtZW50IFwiLGUpLG5ldyBFcnJvcihcIkF0dHJpYnV0ZSB2YWx1ZSB3YXMgbm90IHNpbXBsZVwiKTtlLnNldEF0dHJpYnV0ZSh0LG4rXCJcIil9KGUuZG9tKCksdCxuKX0pLEk9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fGU9PT11bmRlZmluZWQpdGhyb3cgbmV3IEVycm9yKFwiTm9kZSBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWRcIik7cmV0dXJue2RvbTpsKGUpfX0sTj17ZnJvbUh0bWw6ZnVuY3Rpb24oZSx0KXt2YXIgbj0odHx8bS5kb2N1bWVudCkuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihuLmlubmVySFRNTD1lLCFuLmhhc0NoaWxkTm9kZXMoKXx8MTxuLmNoaWxkTm9kZXMubGVuZ3RoKXRocm93IG0uY29uc29sZS5lcnJvcihcIkhUTUwgZG9lcyBub3QgaGF2ZSBhIHNpbmdsZSByb290IG5vZGVcIixlKSxuZXcgRXJyb3IoXCJIVE1MIG11c3QgaGF2ZSBhIHNpbmdsZSByb290IG5vZGVcIik7cmV0dXJuIEkobi5jaGlsZE5vZGVzWzBdKX0sZnJvbVRhZzpmdW5jdGlvbihlLHQpe3ZhciBuPSh0fHxtLmRvY3VtZW50KS5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBJKG4pfSxmcm9tVGV4dDpmdW5jdGlvbihlLHQpe3ZhciBuPSh0fHxtLmRvY3VtZW50KS5jcmVhdGVUZXh0Tm9kZShlKTtyZXR1cm4gSShuKX0sZnJvbURvbTpJLGZyb21Qb2ludDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5kb20oKTtyZXR1cm4gQS5mcm9tKHIuZWxlbWVudEZyb21Qb2ludCh0LG4pKS5tYXAoSSl9fSxQPXRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKFwidGlueW1jZS5kb20uRE9NVXRpbHNcIiksTD10aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZShcInRpbnltY2UudXRpbC5Qcm9taXNlXCIpLF89dGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoXCJ0aW55bWNlLnV0aWwuWEhSXCIpLEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0UGFyYW0oXCJpbWFnZV9kaW1lbnNpb25zXCIsITAsXCJib29sZWFuXCIpfSxNPWZ1bmN0aW9uKGUpe3JldHVybiBlLmdldFBhcmFtKFwiaW1hZ2VzX3VwbG9hZF91cmxcIixcIlwiLFwic3RyaW5nXCIpfSxSPWZ1bmN0aW9uKGUpe3JldHVybiBlLmdldFBhcmFtKFwiaW1hZ2VzX3VwbG9hZF9oYW5kbGVyXCIsdW5kZWZpbmVkLFwiZnVuY3Rpb25cIil9LHo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5tYXgocGFyc2VJbnQoZSwxMCkscGFyc2VJbnQodCwxMCkpfSxIPWZ1bmN0aW9uKGUpe3JldHVybiBlPWUmJmUucmVwbGFjZSgvcHgkLyxcIlwiKX0saz1mdW5jdGlvbihlKXtyZXR1cm4gMDxlLmxlbmd0aCYmL15bMC05XSskLy50ZXN0KGUpJiYoZSs9XCJweFwiKSxlfSxqPWZ1bmN0aW9uKGUpe2lmKGUubWFyZ2luKXt2YXIgdD1TdHJpbmcoZS5tYXJnaW4pLnNwbGl0KFwiIFwiKTtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMTplW1wibWFyZ2luLXRvcFwiXT1lW1wibWFyZ2luLXRvcFwiXXx8dFswXSxlW1wibWFyZ2luLXJpZ2h0XCJdPWVbXCJtYXJnaW4tcmlnaHRcIl18fHRbMF0sZVtcIm1hcmdpbi1ib3R0b21cIl09ZVtcIm1hcmdpbi1ib3R0b21cIl18fHRbMF0sZVtcIm1hcmdpbi1sZWZ0XCJdPWVbXCJtYXJnaW4tbGVmdFwiXXx8dFswXTticmVhaztjYXNlIDI6ZVtcIm1hcmdpbi10b3BcIl09ZVtcIm1hcmdpbi10b3BcIl18fHRbMF0sZVtcIm1hcmdpbi1yaWdodFwiXT1lW1wibWFyZ2luLXJpZ2h0XCJdfHx0WzFdLGVbXCJtYXJnaW4tYm90dG9tXCJdPWVbXCJtYXJnaW4tYm90dG9tXCJdfHx0WzBdLGVbXCJtYXJnaW4tbGVmdFwiXT1lW1wibWFyZ2luLWxlZnRcIl18fHRbMV07YnJlYWs7Y2FzZSAzOmVbXCJtYXJnaW4tdG9wXCJdPWVbXCJtYXJnaW4tdG9wXCJdfHx0WzBdLGVbXCJtYXJnaW4tcmlnaHRcIl09ZVtcIm1hcmdpbi1yaWdodFwiXXx8dFsxXSxlW1wibWFyZ2luLWJvdHRvbVwiXT1lW1wibWFyZ2luLWJvdHRvbVwiXXx8dFsyXSxlW1wibWFyZ2luLWxlZnRcIl09ZVtcIm1hcmdpbi1sZWZ0XCJdfHx0WzFdO2JyZWFrO2Nhc2UgNDplW1wibWFyZ2luLXRvcFwiXT1lW1wibWFyZ2luLXRvcFwiXXx8dFswXSxlW1wibWFyZ2luLXJpZ2h0XCJdPWVbXCJtYXJnaW4tcmlnaHRcIl18fHRbMV0sZVtcIm1hcmdpbi1ib3R0b21cIl09ZVtcIm1hcmdpbi1ib3R0b21cIl18fHRbMl0sZVtcIm1hcmdpbi1sZWZ0XCJdPWVbXCJtYXJnaW4tbGVmdFwiXXx8dFszXX1kZWxldGUgZS5tYXJnaW59cmV0dXJuIGV9LEI9ZnVuY3Rpb24oZSl7cmV0dXJuXCJJTUdcIj09PWUubm9kZU5hbWUmJihlLmhhc0F0dHJpYnV0ZShcImRhdGEtbWNlLW9iamVjdFwiKXx8ZS5oYXNBdHRyaWJ1dGUoXCJkYXRhLW1jZS1wbGFjZWhvbGRlclwiKSl9LEY9UC5ET00sRz1mdW5jdGlvbihlKXtyZXR1cm4gZS5zdHlsZS5tYXJnaW5MZWZ0JiZlLnN0eWxlLm1hcmdpblJpZ2h0JiZlLnN0eWxlLm1hcmdpbkxlZnQ9PT1lLnN0eWxlLm1hcmdpblJpZ2h0P0goZS5zdHlsZS5tYXJnaW5MZWZ0KTpcIlwifSxXPWZ1bmN0aW9uKGUpe3JldHVybiBlLnN0eWxlLm1hcmdpblRvcCYmZS5zdHlsZS5tYXJnaW5Cb3R0b20mJmUuc3R5bGUubWFyZ2luVG9wPT09ZS5zdHlsZS5tYXJnaW5Cb3R0b20/SChlLnN0eWxlLm1hcmdpblRvcCk6XCJcIn0scT1mdW5jdGlvbihlKXtyZXR1cm4gZS5zdHlsZS5ib3JkZXJXaWR0aD9IKGUuc3R5bGUuYm9yZGVyV2lkdGgpOlwiXCJ9LCQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5oYXNBdHRyaWJ1dGUodCk/ZS5nZXRBdHRyaWJ1dGUodCk6XCJcIn0sSj1mdW5jdGlvbihlLHQpe3JldHVybiBlLnN0eWxlW3RdP2Uuc3R5bGVbdF06XCJcIn0sWD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUucGFyZW50Tm9kZSYmXCJGSUdVUkVcIj09PWUucGFyZW50Tm9kZS5ub2RlTmFtZX0sVj1mdW5jdGlvbihlLHQsbil7XCJcIj09PW4/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6ZS5zZXRBdHRyaWJ1dGUodCxuKX0sSz1mdW5jdGlvbihlKXt2YXIgdCxuLHIsYTtYKGUpPyhhPShyPWUpLnBhcmVudE5vZGUsRi5pbnNlcnRBZnRlcihyLGEpLEYucmVtb3ZlKGEpKToodD1lLG49Ri5jcmVhdGUoXCJmaWd1cmVcIix7XCJjbGFzc1wiOlwiaW1hZ2VcIn0pLEYuaW5zZXJ0QWZ0ZXIobix0KSxuLmFwcGVuZENoaWxkKHQpLG4uYXBwZW5kQ2hpbGQoRi5jcmVhdGUoXCJmaWdjYXB0aW9uXCIse2NvbnRlbnRFZGl0YWJsZTpcInRydWVcIn0sXCJDYXB0aW9uXCIpKSxuLmNvbnRlbnRFZGl0YWJsZT1cImZhbHNlXCIpfSxaPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSxyPXQobnVsbCE9PW4/bjpcIlwiKTswPHIubGVuZ3RoPyhlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsciksZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1jZS1zdHlsZVwiLHIpKTplLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpfSxRPWZ1bmN0aW9uKGUscil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXtlLnN0eWxlW3RdPyhlLnN0eWxlW3RdPWsobiksWihlLHIpKTpWKGUsdCxuKX19LFk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdHlsZVt0XT9IKGUuc3R5bGVbdF0pOiQoZSx0KX0sZWU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1rKHQpO2Uuc3R5bGUubWFyZ2luTGVmdD1uLGUuc3R5bGUubWFyZ2luUmlnaHQ9bn0sdGU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1rKHQpO2Uuc3R5bGUubWFyZ2luVG9wPW4sZS5zdHlsZS5tYXJnaW5Cb3R0b209bn0sbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1rKHQpO2Uuc3R5bGUuYm9yZGVyV2lkdGg9bn0scmU9ZnVuY3Rpb24oZSx0KXtlLnN0eWxlLmJvcmRlclN0eWxlPXR9LGFlPWZ1bmN0aW9uKGUpe3JldHVyblwiRklHVVJFXCI9PT1lLm5vZGVOYW1lfSxpZT1mdW5jdGlvbihlKXtyZXR1cm4gMD09PUYuZ2V0QXR0cmliKGUsXCJhbHRcIikubGVuZ3RoJiZcInByZXNlbnRhdGlvblwiPT09Ri5nZXRBdHRyaWIoZSxcInJvbGVcIil9LG9lPWZ1bmN0aW9uKCl7cmV0dXJue3NyYzpcIlwiLGFsdDpcIlwiLHRpdGxlOlwiXCIsd2lkdGg6XCJcIixoZWlnaHQ6XCJcIixcImNsYXNzXCI6XCJcIixzdHlsZTpcIlwiLGNhcHRpb246ITEsaHNwYWNlOlwiXCIsdnNwYWNlOlwiXCIsYm9yZGVyOlwiXCIsYm9yZGVyU3R5bGU6XCJcIixpc0RlY29yYXRpdmU6ITF9fSxsZT1mdW5jdGlvbihlLHQpe3ZhciBuPW0uZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtyZXR1cm4gVihuLFwic3R5bGVcIix0LnN0eWxlKSwhRyhuKSYmXCJcIj09PXQuaHNwYWNlfHxlZShuLHQuaHNwYWNlKSwhVyhuKSYmXCJcIj09PXQudnNwYWNlfHx0ZShuLHQudnNwYWNlKSwhcShuKSYmXCJcIj09PXQuYm9yZGVyfHxuZShuLHQuYm9yZGVyKSwhSihuLFwiYm9yZGVyU3R5bGVcIikmJlwiXCI9PT10LmJvcmRlclN0eWxlfHxyZShuLHQuYm9yZGVyU3R5bGUpLGUobi5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSl9LHNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3NyYzokKHQsXCJzcmNcIiksYWx0OmllKG49dCk/XCJcIjokKG4sXCJhbHRcIiksdGl0bGU6JCh0LFwidGl0bGVcIiksd2lkdGg6WSh0LFwid2lkdGhcIiksaGVpZ2h0OlkodCxcImhlaWdodFwiKSxcImNsYXNzXCI6JCh0LFwiY2xhc3NcIiksc3R5bGU6ZSgkKHQsXCJzdHlsZVwiKSksY2FwdGlvbjpYKHQpLGhzcGFjZTpHKHQpLHZzcGFjZTpXKHQpLGJvcmRlcjpxKHQpLGJvcmRlclN0eWxlOkoodCxcImJvcmRlclN0eWxlXCIpLGlzRGVjb3JhdGl2ZTppZSh0KX07dmFyIG59LHVlPWZ1bmN0aW9uKGUsdCxuLHIsYSl7bltyXSE9PXRbcl0mJmEoZSxyLG5bcl0pfSxjZT1mdW5jdGlvbihlLHQsbil7aWYobil7Ri5zZXRBdHRyaWIoZSxcInJvbGVcIixcInByZXNlbnRhdGlvblwiKTt2YXIgcj1OLmZyb21Eb20oZSk7TyhyLFwiYWx0XCIsXCJcIil9ZWxzZXtpZih2KHQpKXtyPU4uZnJvbURvbShlKTthPVwiYWx0XCIsci5kb20oKS5yZW1vdmVBdHRyaWJ1dGUoYSl9ZWxzZXtyPU4uZnJvbURvbShlKTtPKHIsXCJhbHRcIix0KX1cInByZXNlbnRhdGlvblwiPT09Ri5nZXRBdHRyaWIoZSxcInJvbGVcIikmJkYuc2V0QXR0cmliKGUsXCJyb2xlXCIsXCJcIil9dmFyIGF9LG1lPWZ1bmN0aW9uKHIsYSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXtyKGUsbiksWihlLGEpfX0sZGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGEsaSxvPXNlKGUsbik7dWUobixvLHQsXCJjYXB0aW9uXCIsZnVuY3Rpb24oZSx0LG4pe3JldHVybiBLKGUpfSksdWUobixvLHQsXCJzcmNcIixWKSx1ZShuLG8sdCxcInRpdGxlXCIsViksdWUobixvLHQsXCJ3aWR0aFwiLFEoMCxlKSksdWUobixvLHQsXCJoZWlnaHRcIixRKDAsZSkpLHVlKG4sbyx0LFwiY2xhc3NcIixWKSx1ZShuLG8sdCxcInN0eWxlXCIsbWUoZnVuY3Rpb24oZSx0KXtyZXR1cm4gVihlLFwic3R5bGVcIix0KX0sZSkpLHVlKG4sbyx0LFwiaHNwYWNlXCIsbWUoZWUsZSkpLHVlKG4sbyx0LFwidnNwYWNlXCIsbWUodGUsZSkpLHVlKG4sbyx0LFwiYm9yZGVyXCIsbWUobmUsZSkpLHVlKG4sbyx0LFwiYm9yZGVyU3R5bGVcIixtZShyZSxlKSkscj1uLGE9bywoaT10KS5hbHQ9PT1hLmFsdCYmaS5pc0RlY29yYXRpdmU9PT1hLmlzRGVjb3JhdGl2ZXx8Y2UocixpLmFsdCxpLmlzRGVjb3JhdGl2ZSl9LGdlPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5kb20uc3R5bGVzLnBhcnNlKHQpLHI9aihuKSxhPWUuZG9tLnN0eWxlcy5wYXJzZShlLmRvbS5zdHlsZXMuc2VyaWFsaXplKHIpKTtyZXR1cm4gZS5kb20uc3R5bGVzLnNlcmlhbGl6ZShhKX0sZmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZWxlY3Rpb24uZ2V0Tm9kZSgpLG49ZS5kb20uZ2V0UGFyZW50KHQsXCJmaWd1cmUuaW1hZ2VcIik7cmV0dXJuIG4/ZS5kb20uc2VsZWN0KFwiaW1nXCIsbilbMF06dCYmKFwiSU1HXCIhPT10Lm5vZGVOYW1lfHxCKHQpKT9udWxsOnR9LHBlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5kb20scj1uLmdldFBhcmVudChlLnBhcmVudE5vZGUsZnVuY3Rpb24oZSl7cmV0dXJuISF0LnNjaGVtYS5nZXRUZXh0QmxvY2tFbGVtZW50cygpW2Uubm9kZU5hbWVdfSx0LmdldEJvZHkoKSk7cmV0dXJuIHI/bi5zcGxpdChyLGUpOmV9LGhlPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24oZSx0KXt2YXIgbj1tLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7aWYoZGUoZSxVKFUoe30sdCkse2NhcHRpb246ITF9KSxuKSxjZShuLHQuYWx0LHQuaXNEZWNvcmF0aXZlKSx0LmNhcHRpb24pe3ZhciByPUYuY3JlYXRlKFwiZmlndXJlXCIse1wiY2xhc3NcIjpcImltYWdlXCJ9KTtyZXR1cm4gci5hcHBlbmRDaGlsZChuKSxyLmFwcGVuZENoaWxkKEYuY3JlYXRlKFwiZmlnY2FwdGlvblwiLHtjb250ZW50RWRpdGFibGU6XCJ0cnVlXCJ9LFwiQ2FwdGlvblwiKSksci5jb250ZW50RWRpdGFibGU9XCJmYWxzZVwiLHJ9cmV0dXJuIG59KGZ1bmN0aW9uKGUpe3JldHVybiBnZSh0LGUpfSxlKTt0LmRvbS5zZXRBdHRyaWIobixcImRhdGEtbWNlLWlkXCIsXCJfX21jZW5ld1wiKSx0LmZvY3VzKCksdC5zZWxlY3Rpb24uc2V0Q29udGVudChuLm91dGVySFRNTCk7dmFyIHI9dC5kb20uc2VsZWN0KCcqW2RhdGEtbWNlLWlkPVwiX19tY2VuZXdcIl0nKVswXTtpZih0LmRvbS5zZXRBdHRyaWIocixcImRhdGEtbWNlLWlkXCIsbnVsbCksYWUocikpe3ZhciBhPXBlKHQscik7dC5zZWxlY3Rpb24uc2VsZWN0KGEpfWVsc2UgdC5zZWxlY3Rpb24uc2VsZWN0KHIpfSxiZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsYSxpLG8sbD1mZSh0KTtpZihkZShmdW5jdGlvbihlKXtyZXR1cm4gZ2UodCxlKX0sZSxsKSxuPWwsdC5kb20uc2V0QXR0cmliKG4sXCJzcmNcIixuLmdldEF0dHJpYnV0ZShcInNyY1wiKSksYWUobC5wYXJlbnROb2RlKSl7dmFyIHM9bC5wYXJlbnROb2RlO3BlKHQscyksdC5zZWxlY3Rpb24uc2VsZWN0KGwucGFyZW50Tm9kZSl9ZWxzZSB0LnNlbGVjdGlvbi5zZWxlY3QobCkscj10LGE9ZSxvPWZ1bmN0aW9uKCl7aS5vbmxvYWQ9aS5vbmVycm9yPW51bGwsci5zZWxlY3Rpb24mJihyLnNlbGVjdGlvbi5zZWxlY3QoaSksci5ub2RlQ2hhbmdlZCgpKX0sKGk9bCkub25sb2FkPWZ1bmN0aW9uKCl7YS53aWR0aHx8YS5oZWlnaHR8fCFFKHIpfHxyLmRvbS5zZXRBdHRyaWJzKGkse3dpZHRoOlN0cmluZyhpLmNsaWVudFdpZHRoKSxoZWlnaHQ6U3RyaW5nKGkuY2xpZW50SGVpZ2h0KX0pLG8oKX0saS5vbmVycm9yPW99LHZlPXRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKFwidGlueW1jZS51dGlsLlRvb2xzXCIpLHllPWZ1bmN0aW9uKGUpe3JldHVybiBTKGUudmFsdWUpP2UudmFsdWU6XCJcIn0sd2U9ZnVuY3Rpb24oZSxhKXt2YXIgaT1bXTtyZXR1cm4gdmUuZWFjaChlLGZ1bmN0aW9uKGUpe3ZhciB0PVMoZS50ZXh0KT9lLnRleHQ6UyhlLnRpdGxlKT9lLnRpdGxlOlwiXCI7aWYoZS5tZW51IT09dW5kZWZpbmVkKXt2YXIgbj13ZShlLm1lbnUsYSk7aS5wdXNoKHt0ZXh0OnQsaXRlbXM6bn0pfWVsc2V7dmFyIHI9YShlKTtpLnB1c2goe3RleHQ6dCx2YWx1ZTpyfSl9fSksaX0sRGU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXllKSxmdW5jdGlvbihlKXtyZXR1cm4gZT9BLmZyb20oZSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLHQpfSk6QS5ub25lKCl9fSxBZT1mdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj10KGVbbl0sbik7aWYoci5pc1NvbWUoKSlyZXR1cm4gcn1yZXR1cm4gQS5ub25lKCl9KGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9ZSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxcIml0ZW1zXCIpP0FlKGUuaXRlbXMsbik6ZS52YWx1ZT09PW4/QS5zb21lKGUpOkEubm9uZSgpO3ZhciB0fSl9LFNlPURlLHhlPWZ1bmN0aW9uKGUpe3JldHVybiBEZSh5ZSkoZSl9LFRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYmluZChmdW5jdGlvbihlKXtyZXR1cm4gQWUoZSx0KX0pfTtmdW5jdGlvbiBDZShvKXt2YXIgdD1mdW5jdGlvbihlLHIsYSx0KXt2YXIgaT1uZXcgbS5YTUxIdHRwUmVxdWVzdDtpLm9wZW4oXCJQT1NUXCIsby51cmwpLGkud2l0aENyZWRlbnRpYWxzPW8uY3JlZGVudGlhbHMsaS51cGxvYWQub25wcm9ncmVzcz1mdW5jdGlvbihlKXt0KGUubG9hZGVkL2UudG90YWwqMTAwKX0saS5vbmVycm9yPWZ1bmN0aW9uKCl7YShcIkltYWdlIHVwbG9hZCBmYWlsZWQgZHVlIHRvIGEgWEhSIFRyYW5zcG9ydCBlcnJvci4gQ29kZTogXCIraS5zdGF0dXMpfSxpLm9ubG9hZD1mdW5jdGlvbigpe2lmKGkuc3RhdHVzPDIwMHx8MzAwPD1pLnN0YXR1cylhKFwiSFRUUCBFcnJvcjogXCIraS5zdGF0dXMpO2Vsc2V7dmFyIGUsdCxuPUpTT04ucGFyc2UoaS5yZXNwb25zZVRleHQpO2lmKG4mJlwic3RyaW5nXCI9PXR5cGVvZiBuLmxvY2F0aW9uKXIoKGU9by5iYXNlUGF0aCx0PW4ubG9jYXRpb24sZT9lLnJlcGxhY2UoL1xcLyQvLFwiXCIpK1wiL1wiK3QucmVwbGFjZSgvXlxcLy8sXCJcIik6dCkpO2Vsc2UgYShcIkludmFsaWQgSlNPTjogXCIraS5yZXNwb25zZVRleHQpfX07dmFyIG49bmV3IG0uRm9ybURhdGE7bi5hcHBlbmQoXCJmaWxlXCIsZS5ibG9iKCksZS5maWxlbmFtZSgpKSxpLnNlbmQobil9O3JldHVybiBvPXZlLmV4dGVuZCh7Y3JlZGVudGlhbHM6ITEsaGFuZGxlcjp0fSxvKSx7dXBsb2FkOmZ1bmN0aW9uKGUpe3JldHVybiBvLnVybHx8by5oYW5kbGVyIT09dD8ocj1lLGE9by5oYW5kbGVyLG5ldyBMKGZ1bmN0aW9uKGUsdCl7dHJ5e2EocixlLHQsaSl9Y2F0Y2gobil7dChuLm1lc3NhZ2UpfX0pKTpMLnJlamVjdChcIlVwbG9hZCB1cmwgbWlzc2luZyBmcm9tIHRoZSBzZXR0aW5ncy5cIik7dmFyIHIsYX19fXZhciBVZT1mdW5jdGlvbihlKXtyZXR1cm57dGl0bGU6XCJBZHZhbmNlZFwiLG5hbWU6XCJhZHZhbmNlZFwiLGl0ZW1zOlt7dHlwZTpcImlucHV0XCIsbGFiZWw6XCJTdHlsZVwiLG5hbWU6XCJzdHlsZVwifSx7dHlwZTpcImdyaWRcIixjb2x1bW5zOjIsaXRlbXM6W3t0eXBlOlwiaW5wdXRcIixsYWJlbDpcIlZlcnRpY2FsIHNwYWNlXCIsbmFtZTpcInZzcGFjZVwiLGlucHV0TW9kZTpcIm51bWVyaWNcIn0se3R5cGU6XCJpbnB1dFwiLGxhYmVsOlwiSG9yaXpvbnRhbCBzcGFjZVwiLG5hbWU6XCJoc3BhY2VcIixpbnB1dE1vZGU6XCJudW1lcmljXCJ9LHt0eXBlOlwiaW5wdXRcIixsYWJlbDpcIkJvcmRlciB3aWR0aFwiLG5hbWU6XCJib3JkZXJcIixpbnB1dE1vZGU6XCJudW1lcmljXCJ9LHt0eXBlOlwic2VsZWN0Ym94XCIsbmFtZTpcImJvcmRlcnN0eWxlXCIsbGFiZWw6XCJCb3JkZXIgc3R5bGVcIixpdGVtczpbe3RleHQ6XCJTZWxlY3QuLi5cIix2YWx1ZTpcIlwifSx7dGV4dDpcIlNvbGlkXCIsdmFsdWU6XCJzb2xpZFwifSx7dGV4dDpcIkRvdHRlZFwiLHZhbHVlOlwiZG90dGVkXCJ9LHt0ZXh0OlwiRGFzaGVkXCIsdmFsdWU6XCJkYXNoZWRcIn0se3RleHQ6XCJEb3VibGVcIix2YWx1ZTpcImRvdWJsZVwifSx7dGV4dDpcIkdyb292ZVwiLHZhbHVlOlwiZ3Jvb3ZlXCJ9LHt0ZXh0OlwiUmlkZ2VcIix2YWx1ZTpcInJpZGdlXCJ9LHt0ZXh0OlwiSW5zZXRcIix2YWx1ZTpcImluc2V0XCJ9LHt0ZXh0OlwiT3V0c2V0XCIsdmFsdWU6XCJvdXRzZXRcIn0se3RleHQ6XCJOb25lXCIsdmFsdWU6XCJub25lXCJ9LHt0ZXh0OlwiSGlkZGVuXCIsdmFsdWU6XCJoaWRkZW5cIn1dfV19XX19LE9lPWZ1bmN0aW9uKHIpe3ZhciB0LGUsYT1TZShmdW5jdGlvbihlKXtyZXR1cm4gci5jb252ZXJ0VVJMKGUudmFsdWV8fGUudXJsLFwic3JjXCIpfSksbj1uZXcgTChmdW5jdGlvbih0KXt2YXIgbixlO249ZnVuY3Rpb24oZSl7dChhKGUpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4geChbW3t0ZXh0OlwiTm9uZVwiLHZhbHVlOlwiXCJ9XSxlXSl9KSl9LFwic3RyaW5nXCI9PXR5cGVvZihlPXIuZ2V0UGFyYW0oXCJpbWFnZV9saXN0XCIsITEpKT9fLnNlbmQoe3VybDplLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7bihKU09OLnBhcnNlKGUpKX19KTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2Uobik6bihlKX0pLGk9eGUoci5nZXRQYXJhbShcImltYWdlX2NsYXNzX2xpc3RcIikpLG89ci5nZXRQYXJhbShcImltYWdlX2FkdnRhYlwiLCExLFwiYm9vbGVhblwiKSxsPXIuZ2V0UGFyYW0oXCJpbWFnZV91cGxvYWR0YWJcIiwhMCxcImJvb2xlYW5cIikscz0hIU0ociksdT0hIVIociksYz0oZT1mZSh0PXIpKT9zZShmdW5jdGlvbihlKXtyZXR1cm4gZ2UodCxlKX0sZSk6b2UoKSxtPXIuZ2V0UGFyYW0oXCJpbWFnZV9kZXNjcmlwdGlvblwiLCEwLFwiYm9vbGVhblwiKSxkPXIuZ2V0UGFyYW0oXCJpbWFnZV90aXRsZVwiLCExLFwiYm9vbGVhblwiKSxnPUUociksZj1yLmdldFBhcmFtKFwiaW1hZ2VfY2FwdGlvblwiLCExLFwiYm9vbGVhblwiKSxwPXIuZ2V0UGFyYW0oXCJhMTF5X2FkdmFuY2VkX29wdGlvbnNcIiwhMSxcImJvb2xlYW5cIiksaD1NKHIpLGI9ci5nZXRQYXJhbShcImltYWdlc191cGxvYWRfYmFzZV9wYXRoXCIsdW5kZWZpbmVkLFwic3RyaW5nXCIpLHY9ci5nZXRQYXJhbShcImltYWdlc191cGxvYWRfY3JlZGVudGlhbHNcIiwhMSxcImJvb2xlYW5cIikseT1SKHIpLHc9ci5nZXRQYXJhbShcImF1dG9tYXRpY191cGxvYWRzXCIsITAsXCJib29sZWFuXCIpLEQ9QS5zb21lKHIuZ2V0UGFyYW0oXCJpbWFnZV9wcmVwZW5kX3VybFwiLFwiXCIsXCJzdHJpbmdcIikpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gUyhlKSYmMDxlLmxlbmd0aH0pO3JldHVybiBuLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJue2ltYWdlOmMsaW1hZ2VMaXN0OmUsY2xhc3NMaXN0OmksaGFzQWR2VGFiOm8saGFzVXBsb2FkVGFiOmwsaGFzVXBsb2FkVXJsOnMsaGFzVXBsb2FkSGFuZGxlcjp1LGhhc0Rlc2NyaXB0aW9uOm0saGFzSW1hZ2VUaXRsZTpkLGhhc0RpbWVuc2lvbnM6ZyxoYXNJbWFnZUNhcHRpb246Zix1cmw6aCxiYXNlUGF0aDpiLGNyZWRlbnRpYWxzOnYsaGFuZGxlcjp5LHByZXBlbmRVUkw6RCxoYXNBY2Nlc3NpYmlsaXR5T3B0aW9uczpwLGF1dG9tYXRpY1VwbG9hZHM6d319KX0sSWU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbWFnZUxpc3QubWFwKGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOlwiaW1hZ2VzXCIsdHlwZTpcInNlbGVjdGJveFwiLGxhYmVsOlwiSW1hZ2UgbGlzdFwiLGl0ZW1zOmV9fSksbj17bmFtZTpcImFsdFwiLHR5cGU6XCJpbnB1dFwiLGxhYmVsOlwiQWx0ZXJuYXRpdmUgZGVzY3JpcHRpb25cIixkaXNhYmxlZDplLmhhc0FjY2Vzc2liaWxpdHlPcHRpb25zJiZlLmltYWdlLmlzRGVjb3JhdGl2ZX0scj1lLmNsYXNzTGlzdC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6XCJjbGFzc2VzXCIsdHlwZTpcInNlbGVjdGJveFwiLGxhYmVsOlwiQ2xhc3NcIixpdGVtczplfX0pO3JldHVybiB4KFtbe25hbWU6XCJzcmNcIix0eXBlOlwidXJsaW5wdXRcIixmaWxldHlwZTpcImltYWdlXCIsbGFiZWw6XCJTb3VyY2VcIn1dLHQudG9BcnJheSgpLGUuaGFzQWNjZXNzaWJpbGl0eU9wdGlvbnMmJmUuaGFzRGVzY3JpcHRpb24/W3t0eXBlOlwibGFiZWxcIixsYWJlbDpcIkFjY2Vzc2liaWxpdHlcIixpdGVtczpbe25hbWU6XCJpc0RlY29yYXRpdmVcIix0eXBlOlwiY2hlY2tib3hcIixsYWJlbDpcIkltYWdlIGlzIGRlY29yYXRpdmVcIn1dfV06W10sZS5oYXNEZXNjcmlwdGlvbj9bbl06W10sZS5oYXNJbWFnZVRpdGxlP1t7bmFtZTpcInRpdGxlXCIsdHlwZTpcImlucHV0XCIsbGFiZWw6XCJJbWFnZSB0aXRsZVwifV06W10sZS5oYXNEaW1lbnNpb25zP1t7bmFtZTpcImRpbWVuc2lvbnNcIix0eXBlOlwic2l6ZWlucHV0XCJ9XTpbXSxbe3R5cGU6XCJncmlkXCIsY29sdW1uczoyLGl0ZW1zOngoW3IudG9BcnJheSgpLGUuaGFzSW1hZ2VDYXB0aW9uP1t7dHlwZTpcImxhYmVsXCIsbGFiZWw6XCJDYXB0aW9uXCIsaXRlbXM6W3t0eXBlOlwiY2hlY2tib3hcIixuYW1lOlwiY2FwdGlvblwiLGxhYmVsOlwiU2hvdyBjYXB0aW9uXCJ9XX1dOltdXSl9XV0pfSxOZT1mdW5jdGlvbihlKXtyZXR1cm57dGl0bGU6XCJHZW5lcmFsXCIsbmFtZTpcImdlbmVyYWxcIixpdGVtczpJZShlKX19LFBlPUllLExlPWZ1bmN0aW9uKGUpe3JldHVybnt0aXRsZTpcIlVwbG9hZFwiLG5hbWU6XCJ1cGxvYWRcIixpdGVtczpbe3R5cGU6XCJkcm9wem9uZVwiLG5hbWU6XCJmaWxlaW5wdXRcIn1dfX0sX2U9ZnVuY3Rpb24oZSl7cmV0dXJue3NyYzp7dmFsdWU6ZS5zcmMsbWV0YTp7fX0saW1hZ2VzOmUuc3JjLGFsdDplLmFsdCx0aXRsZTplLnRpdGxlLGRpbWVuc2lvbnM6e3dpZHRoOmUud2lkdGgsaGVpZ2h0OmUuaGVpZ2h0fSxjbGFzc2VzOmVbXCJjbGFzc1wiXSxjYXB0aW9uOmUuY2FwdGlvbixzdHlsZTplLnN0eWxlLHZzcGFjZTplLnZzcGFjZSxib3JkZXI6ZS5ib3JkZXIsaHNwYWNlOmUuaHNwYWNlLGJvcmRlcnN0eWxlOmUuYm9yZGVyU3R5bGUsZmlsZWlucHV0OltdLGlzRGVjb3JhdGl2ZTplLmlzRGVjb3JhdGl2ZX19LEVlPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3NyYzplLnNyYy52YWx1ZSxhbHQ6MD09PWUuYWx0Lmxlbmd0aCYmdD9udWxsOmUuYWx0LHRpdGxlOmUudGl0bGUsd2lkdGg6ZS5kaW1lbnNpb25zLndpZHRoLGhlaWdodDplLmRpbWVuc2lvbnMuaGVpZ2h0LFwiY2xhc3NcIjplLmNsYXNzZXMsc3R5bGU6ZS5zdHlsZSxjYXB0aW9uOmUuY2FwdGlvbixoc3BhY2U6ZS5oc3BhY2UsdnNwYWNlOmUudnNwYWNlLGJvcmRlcjplLmJvcmRlcixib3JkZXJTdHlsZTplLmJvcmRlcnN0eWxlLGlzRGVjb3JhdGl2ZTplLmlzRGVjb3JhdGl2ZX19LE1lPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixhPXQuZ2V0RGF0YSgpO249ZSxyPWEuc3JjLnZhbHVlLCgvXig/OlthLXpBLVpdKzopP1xcL1xcLy8udGVzdChyKT9BLm5vbmUoKTpuLnByZXBlbmRVUkwuYmluZChmdW5jdGlvbihlKXtyZXR1cm4gci5zdWJzdHJpbmcoMCxlLmxlbmd0aCkhPT1lP0Euc29tZShlK3IpOkEubm9uZSgpfSkpLmVhY2goZnVuY3Rpb24oZSl7dC5zZXREYXRhKHtzcmM6e3ZhbHVlOmUsbWV0YTphLnNyYy5tZXRhfX0pfSl9LFJlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixhLGk9dC5nZXREYXRhKCksbz1pLnNyYy5tZXRhO2lmKG8hPT11bmRlZmluZWQpe3ZhciBsPUMoe30saSk7cj1sLGE9bywobj1lKS5oYXNEZXNjcmlwdGlvbiYmUyhhLmFsdCkmJihyLmFsdD1hLmFsdCksbi5oYXNBY2Nlc3NpYmlsaXR5T3B0aW9ucyYmKHIuaXNEZWNvcmF0aXZlPWEuaXNEZWNvcmF0aXZlfHxyLmlzRGVjb3JhdGl2ZXx8ITEpLG4uaGFzSW1hZ2VUaXRsZSYmUyhhLnRpdGxlKSYmKHIudGl0bGU9YS50aXRsZSksbi5oYXNEaW1lbnNpb25zJiYoUyhhLndpZHRoKSYmKHIuZGltZW5zaW9ucy53aWR0aD1hLndpZHRoKSxTKGEuaGVpZ2h0KSYmKHIuZGltZW5zaW9ucy5oZWlnaHQ9YS5oZWlnaHQpKSxTKGFbXCJjbGFzc1wiXSkmJlRlKG4uY2xhc3NMaXN0LGFbXCJjbGFzc1wiXSkuZWFjaChmdW5jdGlvbihlKXtyLmNsYXNzZXM9ZS52YWx1ZX0pLG4uaGFzSW1hZ2VDYXB0aW9uJiZ5KGEuY2FwdGlvbikmJihyLmNhcHRpb249YS5jYXB0aW9uKSxuLmhhc0FkdlRhYiYmKFMoYS5zdHlsZSkmJihyLnN0eWxlPWEuc3R5bGUpLFMoYS52c3BhY2UpJiYoci52c3BhY2U9YS52c3BhY2UpLFMoYS5ib3JkZXIpJiYoci5ib3JkZXI9YS5ib3JkZXIpLFMoYS5oc3BhY2UpJiYoci5oc3BhY2U9YS5oc3BhY2UpLFMoYS5ib3JkZXJzdHlsZSkmJihyLmJvcmRlcnN0eWxlPWEuYm9yZGVyc3R5bGUpKSx0LnNldERhdGEobCl9fSx6ZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgYSxpLG8sbCxzLHUsYyxtLGQsZyxmLHA7TWUodCxyKSxSZSh0LHIpLGE9ZSxpPXQsbz1uLHM9KGw9cikuZ2V0RGF0YSgpLHU9cy5zcmMudmFsdWUsKGM9cy5zcmMubWV0YXx8e30pLndpZHRofHxjLmhlaWdodHx8IWkuaGFzRGltZW5zaW9uc3x8YS5pbWFnZVNpemUodSkudGhlbihmdW5jdGlvbihlKXtvLm9wZW4mJmwuc2V0RGF0YSh7ZGltZW5zaW9uczplfSl9KSxtPXQsZD1uLGY9KGc9cikuZ2V0RGF0YSgpLHA9VGUobS5pbWFnZUxpc3QsZi5zcmMudmFsdWUpLGQucHJldkltYWdlPXAsZy5zZXREYXRhKHtpbWFnZXM6cC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUudmFsdWV9KS5nZXRPcihcIlwiKX0pfSxIZT1mdW5jdGlvbihlLHQsbil7dmFyIHIsYSxpLG8sbCxzPWooZShuLnN0eWxlKSksdT1DKHt9LG4pO3JldHVybiB1LnZzcGFjZT0ocj1zKVtcIm1hcmdpbi10b3BcIl0mJnJbXCJtYXJnaW4tYm90dG9tXCJdJiZyW1wibWFyZ2luLXRvcFwiXT09PXJbXCJtYXJnaW4tYm90dG9tXCJdP0goU3RyaW5nKHJbXCJtYXJnaW4tdG9wXCJdKSk6XCJcIix1LmhzcGFjZT0oYT1zKVtcIm1hcmdpbi1yaWdodFwiXSYmYVtcIm1hcmdpbi1sZWZ0XCJdJiZhW1wibWFyZ2luLXJpZ2h0XCJdPT09YVtcIm1hcmdpbi1sZWZ0XCJdP0goU3RyaW5nKGFbXCJtYXJnaW4tcmlnaHRcIl0pKTpcIlwiLHUuYm9yZGVyPShpPXMpW1wiYm9yZGVyLXdpZHRoXCJdP0goU3RyaW5nKGlbXCJib3JkZXItd2lkdGhcIl0pKTpcIlwiLHUuYm9yZGVyc3R5bGU9KG89cylbXCJib3JkZXItc3R5bGVcIl0/U3RyaW5nKG9bXCJib3JkZXItc3R5bGVcIl0pOlwiXCIsdS5zdHlsZT0obD10KShlKGwocykpKSx1fSxrZT1mdW5jdGlvbihzLHUsdCxjKXt2YXIgZSxuPWMuZ2V0RGF0YSgpO2MuYmxvY2soXCJVcGxvYWRpbmcgaW1hZ2VcIiksKDA9PT0oZT1uLmZpbGVpbnB1dCkubGVuZ3RoP0Eubm9uZSgpOkEuc29tZShlWzBdKSkuZm9sZChmdW5jdGlvbigpe2MudW5ibG9jaygpfSxmdW5jdGlvbihuKXt2YXIgcixhPW0uVVJMLmNyZWF0ZU9iamVjdFVSTChuKSxpPUNlKHt1cmw6dS51cmwsYmFzZVBhdGg6dS5iYXNlUGF0aCxjcmVkZW50aWFsczp1LmNyZWRlbnRpYWxzLGhhbmRsZXI6dS5oYW5kbGVyfSksbz1mdW5jdGlvbigpe2MudW5ibG9jaygpLG0uVVJMLnJldm9rZU9iamVjdFVSTChhKX0sbD1mdW5jdGlvbihlKXtjLnNldERhdGEoe3NyYzp7dmFsdWU6ZSxtZXRhOnt9fX0pLGMuc2hvd1RhYihcImdlbmVyYWxcIiksemUocyx1LHQsYyl9O3I9bixuZXcgTChmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBtLkZpbGVSZWFkZXI7bi5vbmxvYWQ9ZnVuY3Rpb24oKXtlKG4ucmVzdWx0KX0sbi5vbmVycm9yPWZ1bmN0aW9uKCl7dChuLmVycm9yLm1lc3NhZ2UpfSxuLnJlYWRBc0RhdGFVUkwocil9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PXMuY3JlYXRlQmxvYkNhY2hlKG4sYSxlKTt1LmF1dG9tYXRpY1VwbG9hZHM/aS51cGxvYWQodCkudGhlbihmdW5jdGlvbihlKXtsKGUpLG8oKX0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24oZSl7bygpLHMuYWxlcnRFcnIoZSl9KToocy5hZGRUb0Jsb2JDYWNoZSh0KSxsKHQuYmxvYlVyaSgpKSxjLnVuYmxvY2soKSl9KX0pfSxqZT1mdW5jdGlvbihoLGIsdil7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIG4scixhLGksbyxsLHMsdSxjLG0sZCxnLGYscDtcInNyY1wiPT09dC5uYW1lP3plKGgsYix2LGUpOlwiaW1hZ2VzXCI9PT10Lm5hbWU/KGM9aCxtPWIsZD12LGY9KGc9ZSkuZ2V0RGF0YSgpLChwPVRlKG0uaW1hZ2VMaXN0LGYuaW1hZ2VzKSkuZWFjaChmdW5jdGlvbihlKXtcIlwiPT09Zi5hbHR8fGQucHJldkltYWdlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50ZXh0PT09Zi5hbHR9KS5nZXRPcighMSk/XCJcIj09PWUudmFsdWU/Zy5zZXREYXRhKHtzcmM6ZSxhbHQ6ZC5wcmV2QWx0fSk6Zy5zZXREYXRhKHtzcmM6ZSxhbHQ6ZS50ZXh0fSk6Zy5zZXREYXRhKHtzcmM6ZX0pfSksZC5wcmV2SW1hZ2U9cCx6ZShjLG0sZCxnKSk6XCJhbHRcIj09PXQubmFtZT92LnByZXZBbHQ9ZS5nZXREYXRhKCkuYWx0Olwic3R5bGVcIj09PXQubmFtZT8obz1oLHM9KGw9ZSkuZ2V0RGF0YSgpLHU9SGUoby5wYXJzZVN0eWxlLG8uc2VyaWFsaXplU3R5bGUscyksbC5zZXREYXRhKHUpKTpcInZzcGFjZVwiPT09dC5uYW1lfHxcImhzcGFjZVwiPT09dC5uYW1lfHxcImJvcmRlclwiPT09dC5uYW1lfHxcImJvcmRlcnN0eWxlXCI9PT10Lm5hbWU/KG49aCxyPWUsYT1DKF9lKGIuaW1hZ2UpLHIuZ2V0RGF0YSgpKSxpPWxlKG4ubm9ybWFsaXplQ3NzLEVlKGEsITEpKSxyLnNldERhdGEoe3N0eWxlOml9KSk6XCJmaWxlaW5wdXRcIj09PXQubmFtZT9rZShoLGIsdixlKTpcImlzRGVjb3JhdGl2ZVwiPT09dC5uYW1lJiYoZS5nZXREYXRhKCkuaXNEZWNvcmF0aXZlP2UuZGlzYWJsZShcImFsdFwiKTplLmVuYWJsZShcImFsdFwiKSl9fSxCZT1mdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQsbixyLGE9e3ByZXZJbWFnZTpUZSgodD1lKS5pbWFnZUxpc3QsdC5pbWFnZS5zcmMpLHByZXZBbHQ6dC5pbWFnZS5hbHQsb3BlbjohMH07cmV0dXJue3RpdGxlOlwiSW5zZXJ0L0VkaXQgSW1hZ2VcIixzaXplOlwibm9ybWFsXCIsYm9keToocj1lKS5oYXNBZHZUYWJ8fHIuaGFzVXBsb2FkVXJsfHxyLmhhc1VwbG9hZEhhbmRsZXI/e3R5cGU6XCJ0YWJwYW5lbFwiLHRhYnM6eChbW05lKHIpXSxyLmhhc0FkdlRhYj9bVWUocildOltdLHIuaGFzVXBsb2FkVGFiJiYoci5oYXNVcGxvYWRVcmx8fHIuaGFzVXBsb2FkSGFuZGxlcik/W0xlKHIpXTpbXV0pfTp7dHlwZTpcInBhbmVsXCIsaXRlbXM6UGUocil9LGJ1dHRvbnM6W3t0eXBlOlwiY2FuY2VsXCIsbmFtZTpcImNhbmNlbFwiLHRleHQ6XCJDYW5jZWxcIn0se3R5cGU6XCJzdWJtaXRcIixuYW1lOlwic2F2ZVwiLHRleHQ6XCJTYXZlXCIscHJpbWFyeTohMH1dLGluaXRpYWxEYXRhOl9lKGUuaW1hZ2UpLG9uU3VibWl0Omkub25TdWJtaXQoZSksb25DaGFuZ2U6amUoaSxlLGEpLG9uQ2xvc2U6KG49YSxmdW5jdGlvbigpe24ub3Blbj0hMX0pfX19LEZlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gYT10LmRvY3VtZW50QmFzZVVSSS50b0Fic29sdXRlKGUpLG5ldyBMKGZ1bmN0aW9uKHQpe3ZhciBuPW0uZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxyPWZ1bmN0aW9uKGUpe24ucGFyZW50Tm9kZSYmbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLHQoZSl9O24ub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGU9e3dpZHRoOnoobi53aWR0aCxuLmNsaWVudFdpZHRoKSxoZWlnaHQ6eihuLmhlaWdodCxuLmNsaWVudEhlaWdodCl9O3IoTC5yZXNvbHZlKGUpKX0sbi5vbmVycm9yPWZ1bmN0aW9uKCl7cihMLnJlamVjdChcIkZhaWxlZCB0byBnZXQgaW1hZ2UgZGltZW5zaW9ucyBmb3I6IFwiK2EpKX07dmFyIGU9bi5zdHlsZTtlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixlLnBvc2l0aW9uPVwiZml4ZWRcIixlLmJvdHRvbT1lLmxlZnQ9XCIwcHhcIixlLndpZHRoPWUuaGVpZ2h0PVwiYXV0b1wiLG0uZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKSxuLnNyYz1hfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm57d2lkdGg6U3RyaW5nKGUud2lkdGgpLGhlaWdodDpTdHJpbmcoZS5oZWlnaHQpfX0pO3ZhciBhfX0sR2U9ZnVuY3Rpb24odCl7dmFyIG4scixhLGksbyxsLHMsZT17b25TdWJtaXQ6ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PUMoX2Uobi5pbWFnZSksZS5nZXREYXRhKCkpO3MuZXhlY0NvbW1hbmQoXCJtY2VVcGRhdGVJbWFnZVwiLCExLEVlKHQsbi5oYXNBY2Nlc3NpYmlsaXR5T3B0aW9ucykpLHMuZWRpdG9yVXBsb2FkLnVwbG9hZEltYWdlc0F1dG8oKSxlLmNsb3NlKCl9fSxpbWFnZVNpemU6RmUocz10KSxhZGRUb0Jsb2JDYWNoZTpmdW5jdGlvbihlKXtsLmVkaXRvclVwbG9hZC5ibG9iQ2FjaGUuYWRkKGUpfSxjcmVhdGVCbG9iQ2FjaGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBvLmVkaXRvclVwbG9hZC5ibG9iQ2FjaGUuY3JlYXRlKHtibG9iOmUsYmxvYlVyaTp0LG5hbWU6ZS5uYW1lP2UubmFtZS5yZXBsYWNlKC9cXC5bXlxcLl0rJC8sXCJcIik6bnVsbCxiYXNlNjQ6bi5zcGxpdChcIixcIilbMV19KX0sYWxlcnRFcnI6ZnVuY3Rpb24oZSl7aS53aW5kb3dNYW5hZ2VyLmFsZXJ0KGUpfSxub3JtYWxpemVDc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGdlKGEsZSl9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHIuZG9tLnBhcnNlU3R5bGUoZSl9LHNlcmlhbGl6ZVN0eWxlOihuPXI9YT1pPW89bD10LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZG9tLnNlcmlhbGl6ZVN0eWxlKGUsdCl9KX0sdT1mdW5jdGlvbigpe3JldHVybiBPZSh0KS50aGVuKEJlKGUpKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LndpbmRvd01hbmFnZXIub3BlbihlKX0pfTtyZXR1cm57b3Blbjp1LG9wZW5MYXRlcjpmdW5jdGlvbigpe3UoKX19fSxXZT1mdW5jdGlvbihuKXtuLmFkZENvbW1hbmQoXCJtY2VJbWFnZVwiLEdlKG4pLm9wZW5MYXRlciksbi5hZGRDb21tYW5kKFwibWNlVXBkYXRlSW1hZ2VcIixmdW5jdGlvbihlLHQpe24udW5kb01hbmFnZXIudHJhbnNhY3QoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj1mZSh0KTtpZihuKXt2YXIgcj1zZShmdW5jdGlvbihlKXtyZXR1cm4gZ2UodCxlKX0sbiksYT1VKFUoe30sciksZSk7YS5zcmM/YmUodCxhKTpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPWUuZG9tLmlzKHQucGFyZW50Tm9kZSxcImZpZ3VyZS5pbWFnZVwiKT90LnBhcmVudE5vZGU6dDtlLmRvbS5yZW1vdmUobiksZS5mb2N1cygpLGUubm9kZUNoYW5nZWQoKSxlLmRvbS5pc0VtcHR5KGUuZ2V0Qm9keSgpKSYmKGUuc2V0Q29udGVudChcIlwiKSxlLnNlbGVjdGlvbi5zZXRDdXJzb3JMb2NhdGlvbigpKX19KHQsbil9ZWxzZSBlLnNyYyYmaGUodCxVKFUoe30sb2UoKSksZSkpfShuLHQpfSl9KX0scWU9ZnVuY3Rpb24oaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPWUubGVuZ3RoLHI9ZnVuY3Rpb24oZSl7ZS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsaT9cInRydWVcIjpudWxsKX07bi0tOyl7dmFyIGE9ZVtuXTsodD1hLmF0dHIoXCJjbGFzc1wiKSkmJi9cXGJpbWFnZVxcYi8udGVzdCh0KSYmKGEuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiLGk/XCJmYWxzZVwiOm51bGwpLHZlLmVhY2goYS5nZXRBbGwoXCJmaWdjYXB0aW9uXCIpLHIpKX19fTshZnVuY3Rpb24gJGUoKXthLmFkZChcImltYWdlXCIsZnVuY3Rpb24oZSl7dmFyIHQsbjsodD1lKS5vbihcIlByZUluaXRcIixmdW5jdGlvbigpe3QucGFyc2VyLmFkZE5vZGVGaWx0ZXIoXCJmaWd1cmVcIixxZSghMCkpLHQuc2VyaWFsaXplci5hZGROb2RlRmlsdGVyKFwiZmlndXJlXCIscWUoITEpKX0pLChuPWUpLnVpLnJlZ2lzdHJ5LmFkZFRvZ2dsZUJ1dHRvbihcImltYWdlXCIse2ljb246XCJpbWFnZVwiLHRvb2x0aXA6XCJJbnNlcnQvZWRpdCBpbWFnZVwiLG9uQWN0aW9uOkdlKG4pLm9wZW5MYXRlcixvblNldHVwOmZ1bmN0aW9uKGUpe3JldHVybiBuLnNlbGVjdGlvbi5zZWxlY3RvckNoYW5nZWRXaXRoVW5iaW5kKFwiaW1nOm5vdChbZGF0YS1tY2Utb2JqZWN0XSxbZGF0YS1tY2UtcGxhY2Vob2xkZXJdKSxmaWd1cmUuaW1hZ2VcIixlLnNldEFjdGl2ZSkudW5iaW5kfX0pLG4udWkucmVnaXN0cnkuYWRkTWVudUl0ZW0oXCJpbWFnZVwiLHtpY29uOlwiaW1hZ2VcIix0ZXh0OlwiSW1hZ2UuLi5cIixvbkFjdGlvbjpHZShuKS5vcGVuTGF0ZXJ9KSxuLnVpLnJlZ2lzdHJ5LmFkZENvbnRleHRNZW51KFwiaW1hZ2VcIix7dXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBhZShlKXx8XCJJTUdcIj09PWUubm9kZU5hbWUmJiFCKGUpP1tcImltYWdlXCJdOltdfX0pLFdlKGUpfSl9KCl9KHdpbmRvdyk7Il0sInNvdXJjZVJvb3QiOiIifQ==