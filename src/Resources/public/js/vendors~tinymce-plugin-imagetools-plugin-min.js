(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~tinymce-plugin-imagetools-plugin-min"],{

/***/ "./node_modules/tinymce/plugins/imagetools/plugin.min.js":
/*!***************************************************************!*\
  !*** ./node_modules/tinymce/plugins/imagetools/plugin.min.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.4.2 (2020-08-17)
 */
!function(p){"use strict";var t,e,n,l=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},r=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(){},f=function(t){return function(){return t}},i=f(!1),u=f(!0),a=function(){return c},c=(t=function(t){return t.isNone()},{fold:function(t,e){return t()},is:i,isSome:i,isNone:u,getOr:n=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(undefined),or:n,orThunk:e,map:a,each:o,bind:a,exists:i,forall:u,filter:a,equals:t,equals_:t,toArray:function(){return[]},toString:f("none()")}),s=function(n){var t=f(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:u,isNone:i,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return s(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:c},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(i,function(t){return e(n,t)})}};return o},v={some:s,none:a,from:function(t){return null===t||t===undefined?c:s(t)}};function m(t,e){return y(p.document.createElement("canvas"),t,e)}function h(t){var e=m(t.width,t.height);return g(e).drawImage(t,0,0),e}function g(t){return t.getContext("2d")}function y(t,e,n){return t.width=e,t.height=n,t}var w,b,I,T=window.Promise?window.Promise:(b=(w=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],L(t,_(U,this),_(A,this))}).immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){p.setTimeout(t,1)},I=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},w.prototype["catch"]=function(t){return this.then(null,t)},w.prototype.then=function(n,r){var o=this;return new w(function(t,e){R.call(o,new x(n,r,t,e))})},w.all=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var c=Array.prototype.slice.call(1===t.length&&I(t[0])?t[0]:t);return new w(function(o,i){if(0===c.length)return o([]);var u=c.length;function a(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){a(e,t)},i)}c[e]=t,0==--u&&o(c)}catch(r){i(r)}}for(var t=0;t<c.length;t++)a(t,c[t])})},w.resolve=function(e){return e&&"object"==typeof e&&e.constructor===w?e:new w(function(t){t(e)})},w.reject=function(n){return new w(function(t,e){e(n)})},w.race=function(o){return new w(function(t,e){for(var n=0,r=o;n<r.length;n++)r[n].then(t,e)})},w);function _(t,e){return function(){return t.apply(e,arguments)}}function R(r){var o=this;null!==this._state?b(function(){var t=o._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(o._value)}catch(n){return void r.reject(n)}r.resolve(e)}else(o._state?r.resolve:r.reject)(o._value)}):this._deferreds.push(r)}function U(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void L(_(e,t),_(U,this),_(A,this))}this._state=!0,this._value=t,E.call(this)}catch(n){A.call(this,n)}}function A(t){this._state=!1,this._value=t,E.call(this)}function E(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];R.call(this,n)}this._deferreds=[]}function x(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function L(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}}function j(t){var e=t.src;return(0===e.indexOf("data:")?k:function n(r){return new T(function(t,n){var e=new p.XMLHttpRequest;e.open("GET",r,!0),e.responseType="blob",e.onload=function(){200===this.status&&t(this.response)},e.onerror=function(){var t,e=this;n(0===this.status?((t=new Error("No access to download image")).code=18,t.name="SecurityError",t):new Error("Error "+e.status+" downloading image"))},e.send()})})(e)}function C(a){return new T(function(t,e){var n=p.URL.createObjectURL(a),r=new p.Image,o=function(){r.removeEventListener("load",i),r.removeEventListener("error",u)};function i(){o(),t(r)}function u(){o(),e("Unable to load data of type "+a.type+": "+n)}r.addEventListener("load",i),r.addEventListener("error",u),r.src=n,r.complete&&i()})}function k(n){return new T(function(t,e){(function g(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return v.none();for(var r=n[1],o=e[1],i=p.atob(o),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var f=1024*s,l=Math.min(1024+f,u),d=new Array(l-f),m=f,h=0;m<l;++h,++m)d[h]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return v.some(new p.Blob(c,{type:r}))})(n).fold(function(){e("uri is not base64: "+n)},t)})}function O(t,r,o){return r=r||"image/png",p.HTMLCanvasElement.prototype.toBlob?new T(function(e,n){t.toBlob(function(t){t?e(t):n()},r,o)}):k(t.toDataURL(r,o))}function P(t){return C(t).then(function(t){!function n(t){p.URL.revokeObjectURL(t.src)}(t);var e=m(function r(t){return t.naturalWidth||t.width}(t),function o(t){return t.naturalHeight||t.height}(t));return g(e).drawImage(t,0,0),e})}function S(t,e,n){var r=e.type;function o(e,n){return t.then(function(t){return function r(t,e,n){return e=e||"image/png",t.toDataURL(e,n)}(t,e,n)})}return{getType:f(r),toBlob:function i(){return T.resolve(e)},toDataURL:f(n),toBase64:function u(){return n.split(",")[1]},toAdjustedBlob:function a(e,n){return t.then(function(t){return O(t,e,n)})},toAdjustedDataURL:o,toAdjustedBase64:function c(t,e){return o(t,e).then(function(t){return t.split(",")[1]})},toCanvas:function s(){return t.then(h)}}}function N(e){return function t(n){return new T(function(t){var e=new p.FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})}(e).then(function(t){return S(P(e),e,t)})}function M(e,t){return O(e,t).then(function(t){return S(T.resolve(e),t,e.toDataURL())})}function B(e,n){return e.toCanvas().then(function(t){return function a(t,e,n){var r=m(t.width,t.height),o=g(r),i=0,u=0;90!==(n=n<0?360+n:n)&&270!==n||y(r,r.height,r.width);90!==n&&180!==n||(i=r.width);270!==n&&180!==n||(u=r.height);return o.translate(i,u),o.rotate(n*Math.PI/180),o.drawImage(t,0,0),M(r,e)}(t,e.getType(),n)})}function D(e,n){return e.toCanvas().then(function(t){return function i(t,e,n){var r=m(t.width,t.height),o=g(r);"v"===n?(o.scale(1,-1),o.drawImage(t,0,-r.height)):(o.scale(-1,1),o.drawImage(t,-r.width,0));return M(r,e)}(t,e.getType(),n)})}var F,H=(F="function",function(t){return typeof t===F}),q=function(t,e){return function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return v.some(i);if(n(i,r))break}return v.none()}(t,e,i)},z=function(t){return N(t)},$=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:f(t)}},G={fromHtml:function(t,e){var n=(e||p.document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw p.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return $(n.childNodes[0])},fromTag:function(t,e){var n=(e||p.document).createElement(t);return $(n)},fromText:function(t,e){var n=(e||p.document).createTextNode(t);return $(n)},fromDom:$,fromPoint:function(t,e,n){var r=t.dom();return v.from(r.elementFromPoint(e,n)).map($)}},J=("undefined"!=typeof p.window?p.window:Function("return this;")(),H(p.Element.prototype.attachShadow)&&H(p.Node.prototype.getRootNode),function(t,e){return n=function(t){return function(t,e){var n=t.dom();if(1!==n.nodeType)return!1;var r=n;if(r.matches!==undefined)return r.matches(e);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(e);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(e);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}(t,e)},q(t.dom().childNodes,function(t){return n(G.fromDom(t))}).map(G.fromDom);var n}),K=tinymce.util.Tools.resolve("tinymce.util.Delay"),V=tinymce.util.Tools.resolve("tinymce.util.Promise"),W=tinymce.util.Tools.resolve("tinymce.util.URI"),X=function(t){return t.getParam("imagetools_proxy")};function Q(t){var e,n;function r(t){return/^[0-9\.]+px$/.test(t)}return e=t.style.width,n=t.style.height,e||n?r(e)&&r(n)?{w:parseInt(e,10),h:parseInt(n,10)}:null:(e=t.width,n=t.height,e&&n?{w:parseInt(e,10),h:parseInt(n,10)}:null)}function Y(t){return{w:t.naturalWidth,h:t.naturalHeight}}var Z=function(t){return null!==t&&t!==undefined},tt=function(e,r,o){return new V(function(t){var n=new p.XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&t({status:n.status,blob:this.response})},n.open("GET",e,!0),n.withCredentials=o,d.each(r,function(t,e){n.setRequestHeader(e,t)}),n.responseType="blob",n.send()})},et=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],nt=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],rt=function(t){var e,n=(e=t,"ImageProxy HTTP error: "+q(et,function(t){return e===t.code}).fold(f("Unknown ImageProxy error"),function(t){return t.message}));return V.reject(n)},ot=function(t){var e,n,r=function(t){var e;try{e=JSON.parse(t)}catch(n){}return e}(t),o=(e=["error","type"].reduce(function(t,e){return Z(t)?t[e]:undefined},r),Z(e)?e:null);return"ImageProxy Service error: "+(o?(n=o,q(nt,function(t){return t.type===n}).fold(f("Unknown service error"),function(t){return t.message})):"Invalid JSON in service error message")},it=function(t,e){return r=e,new V(function(n){var t=new p.FileReader;t.onload=function(t){var e=t.target;n(e.result)},t.readAsText(r)}).then(function(t){var e=ot(t);return V.reject(e)});var r},ut=function(t,e){var n,r,o,i={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":e};return tt((r=e,o=-1===(n=t).indexOf("?")?"?":"&",/[?&]apiKey=/.test(n)||!r?n:n+o+"apiKey="+encodeURIComponent(r)),i,!1).then(function(t){return t.status<200||300<=t.status?(e=t.status,n=t.blob,400===(r=e)||403===r||500===r?it(0,n):rt(e)):V.resolve(t.blob);var e,n,r})};var at=function(t,e,n){return e?ut(t,e):function r(t,e){return tt(t,{},e).then(function(t){return t.status<200||300<=t.status?rt(t.status):V.resolve(t.blob)})}(t,n)},ct=0,st=function(t){return J(G.fromDom(t),"img")},ft=function(t,e){return t.dom.is(e,"figure")},lt=function(n,t){var e=function(t){return e=t,n.dom.is(e,"img:not([data-mce-object],[data-mce-placeholder])")&&(ht(n,t)||gt(n,t)||X(n));var e};return ft(n,t)?st(t).map(function(t){return e(t.dom())?v.some(t.dom()):v.none()}):e(t)?v.some(t):v.none()},dt=function(t,e){t.notificationManager.open({text:e,type:"error"})},mt=function(t){var e=t.selection.getNode();return ft(t,e)?st(e):v.some(G.fromDom(e))},ht=function(t,e){var n=e.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new W(n).host===t.documentBaseURI.host},gt=function(t,e){return-1!==d.inArray(t.getParam("imagetools_cors_hosts",[],"string[]"),new W(e.src).host)},pt=function(t,e){var n,r,o,i,u=e.src;return gt(t,e)?at(e.src,null,(r=t,o=e,-1!==d.inArray(r.getParam("imagetools_credentials_hosts",[],"string[]"),new W(o.src).host))):ht(t,e)?j(e):(u=X(t),u+=(-1===u.indexOf("?")?"?":"&")+"url="+encodeURIComponent(e.src),n=(i=t).getParam("api_key",i.getParam("imagetools_api_key","","string"),"string"),at(u,n,!1))},vt=function(t,e){return n=t,v.from(n.getParam("imagetools_fetch_image",null,"function")).fold(function(){return pt(t,e)},function(t){return t(e)});var n},yt=function(t,e){var n=t.editorUpload.blobCache.getByUri(e.src);return n?V.resolve(n.blob()):vt(t,e)},wt=function(t){K.clearTimeout(t.get())},bt=function(a,c,s,f,l,d){return c.toBlob().then(function(t){var e,n,o,r,i,u=a.editorUpload.blobCache;return e=l.src,a.getParam("images_reuse_filename",!1,"boolean")&&(n=(o=u.getByUri(e))?(e=o.uri(),o.name()):(r=a,(i=e.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i))?r.dom.encode(i[1]):null)),o=u.create({id:"imagetools"+ct++,blob:t,base64:c.toBase64(),uri:e,name:n}),u.add(o),a.undoManager.transact(function(){a.$(l).on("load",function r(){var t,e,n;a.$(l).off("load",r),a.nodeChanged(),s?a.editorUpload.uploadImagesAuto():(wt(f),t=a,e=f,n=K.setEditorTimeout(t,function(){t.editorUpload.uploadImagesAuto()},t.getParam("images_upload_timeout",3e4,"number")),e.set(n))}),d&&a.$(l).attr({width:d.w,height:d.h}),a.$(l).attr({src:o.blobUri()}).removeAttr("data-mce-src")}),o})},It=function(n,r,t,o){return function(){return mt(n).fold(function(){dt(n,"Could not find selected image")},function(e){return n._scanForImages().then(function(){return yt(n,e.dom())}).then(z).then(t).then(function(t){return bt(n,t,!1,r,e.dom(),o)},function(t){dt(n,t)})})}},Tt=function(e,n,r){return function(){var t=mt(e).fold(function(){return null},function(t){var e=Q(t.dom());return e?{w:e.h,h:e.w}:null});return It(e,n,function(t){return B(t,r)},t)()}},_t=function(t,e,n){return function(){return It(t,e,function(t){return D(t,n)})()}},Rt=function(e,n,r,i,u){return C(u).then(function(t){var e=Y(t);return i.w===e.w&&i.h===e.h||Q(r)&&function o(t,e){var n,r;e&&(n=t.style.width,r=t.style.height,(n||r)&&(t.style.width=e.w+"px",t.style.height=e.h+"px",t.removeAttribute("data-mce-style")),n=t.width,r=t.height,(n||r)&&(t.setAttribute("width",e.w),t.setAttribute("height",e.h)))}(r,e),p.URL.revokeObjectURL(t.src),u}).then(z).then(function(t){return bt(e,t,!0,n,r)},function(){})},Ut=function(i,u){return function(){var r=mt(i),o=r.map(function(t){return Y(t.dom())});mt(i).each(function(e){lt(i,e.dom()).each(function(t){yt(i,e.dom()).then(function(t){var e,n={blob:e=t,url:p.URL.createObjectURL(e)};i.windowManager.open({title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:n}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(t){var n=t.getData().imagetools.blob;r.each(function(e){o.each(function(t){Rt(i,u,e.dom(),t,n)})}),t.close()},onCancel:function(){},onAction:function(t,e){switch(e.name){case"save-state":e.value?t.enable("save"):t.disable("save");break;case"disable":t.disable("save"),t.disable("cancel");break;case"enable":t.enable("cancel")}}})})})})}};!function At(){r.add("imagetools",function(t){var n,e,r,o,i,u,a,c,s=l(0),f=l(null);n=t,e=s,d.each({mceImageRotateLeft:Tt(n,e,-90),mceImageRotateRight:Tt(n,e,90),mceImageFlipVertical:_t(n,e,"v"),mceImageFlipHorizontal:_t(n,e,"h"),mceEditImage:Ut(n,e)},function(t,e){n.addCommand(e,t)}),o=function(t){return function(){return r.execCommand(t)}},(r=t).ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:o("mceImageRotateLeft")}),r.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:o("mceImageRotateRight")}),r.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:o("mceImageFlipVertical")}),r.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:o("mceImageFlipHorizontal")}),r.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:o("mceEditImage"),onSetup:function(n){var t=function(){mt(r).each(function(t){var e=lt(r,t.dom()).isNone();n.setDisabled(e)})};return r.on("NodeChange",t),function(){r.off("NodeChange",t)}}}),r.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image-options",onAction:o("mceImage")}),r.ui.registry.addContextMenu("imagetools",{update:function(t){return lt(r,t).fold(function(){return[]},function(t){return[{text:"Edit image",icon:"edit-image",onAction:o("mceEditImage")}]})}}),(i=t).ui.registry.addContextToolbar("imagetools",{items:i.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions"),predicate:function(t){return lt(i,t).isSome()},position:"node",scope:"node"}),a=s,c=f,(u=t).on("NodeChange",function(t){var e=c.get();e&&e.src!==t.element.src&&(wt(a),u.editorUpload.uploadImagesAuto(),c.set(null)),lt(u,t.element).each(c.set)})})}()}(window);

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGlueW1jZS9wbHVnaW5zL2ltYWdldG9vbHMvcGx1Z2luLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxhQUFhLHdCQUF3QixRQUFRLE9BQU8sZUFBZSxTQUFTLGlCQUFpQixNQUFNLHdIQUF3SCxlQUFlLGtCQUFrQixVQUFVLDhCQUE4QixTQUFTLGtCQUFrQixrQkFBa0IsRUFBRSxtQkFBbUIsV0FBVyw0Q0FBNEMsU0FBUywwQkFBMEIsV0FBVyxzQkFBc0Isc0RBQXNELG1KQUFtSixTQUFTLHNCQUFzQixnQkFBZ0Isd0JBQXdCLFNBQVMsZUFBZSxZQUFZLElBQUksbUJBQW1CLFlBQVksZ0JBQWdCLGFBQWEsK0dBQStHLGVBQWUsa0JBQWtCLEtBQUssNkNBQTZDLGdCQUFnQixvQkFBb0IsVUFBVSxxQkFBcUIsb0JBQW9CLG9CQUFvQixlQUFlLHVCQUF1Qiw0QkFBNEIsY0FBYyxJQUFJLFNBQVMsSUFBSSwrQkFBK0Isd0NBQXdDLGdCQUFnQixpREFBaUQsY0FBYywwQkFBMEIsK0JBQStCLGNBQWMsMEJBQTBCLGtCQUFrQiw4QkFBOEIsNERBQTRELHFGQUFxRiw4REFBOEQsOEVBQThFLHdGQUF3RixrQkFBa0IsOEJBQThCLDJEQUEyRCxrQ0FBa0MseUJBQXlCLGdDQUFnQyxXQUFXLDJCQUEyQix5QkFBeUIsRUFBRSxrQkFBa0IsaUJBQWlCLG1CQUFtQixzQkFBc0IsK0RBQStELDJCQUEyQiw2QkFBNkIsZUFBZSxnQkFBZ0IsSUFBSSxrREFBa0QsYUFBYSx5REFBeUQsT0FBTyxJQUFJLG9CQUFvQixTQUFTLE1BQU0sWUFBWSxXQUFXLGNBQWMsRUFBRSx1QkFBdUIsb0VBQW9FLEtBQUssRUFBRSxzQkFBc0IsMkJBQTJCLEtBQUssRUFBRSxvQkFBb0IsMkJBQTJCLGdCQUFnQixXQUFXLG1CQUFtQixF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RCxNQUFNLG9EQUFvRCxNQUFNLGtDQUFrQyxFQUFFLEVBQUUsRUFBRSxJQUFJLGVBQWUsK0JBQStCLHFDQUFxQyxnQkFBZ0IsdUpBQXVKLGVBQWUsa0JBQWtCLGdCQUFnQixrQkFBa0IseUJBQXlCLDJDQUEyQyxzRkFBc0YseUNBQXlDLGlGQUFpRixtQ0FBbUMsb0ZBQW9GLG1DQUFtQywwRkFBMEYsdUNBQXVDLHNGQUFzRixpQkFBaUIsdUJBQXVCLDZCQUE2QixpQkFBaUIsR0FBRyx1Q0FBdUMsd0JBQXdCLDBDQUEwQyxvRUFBb0UsNkNBQTZDLG1CQUFtQiwrQkFBK0IsU0FBUyxhQUFhLFFBQVEsK0RBQStELEVBQUUsR0FBRyxvREFBb0QseUhBQXlILHdCQUF3Qiw4QkFBOEIsNENBQTRDLGNBQWMsNEdBQTRHLEVBQUUsRUFBRSxHQUFHLFMiLCJmaWxlIjoidmVuZG9yc350aW55bWNlLXBsdWdpbi1pbWFnZXRvb2xzLXBsdWdpbi1taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgVGlueSBUZWNobm9sb2dpZXMsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBMR1BMIG9yIGEgY29tbWVyY2lhbCBsaWNlbnNlLlxuICogRm9yIExHUEwgc2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKiBGb3IgY29tbWVyY2lhbCBsaWNlbnNlcyBzZWUgaHR0cHM6Ly93d3cudGlueS5jbG91ZC9cbiAqXG4gKiBWZXJzaW9uOiA1LjQuMiAoMjAyMC0wOC0xNylcbiAqL1xuIWZ1bmN0aW9uKHApe1widXNlIHN0cmljdFwiO3ZhciB0LGUsbixsPWZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJue2dldDpmdW5jdGlvbigpe3JldHVybiBlfSxzZXQ6ZnVuY3Rpb24odCl7ZT10fX19LHI9dGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoXCJ0aW55bWNlLlBsdWdpbk1hbmFnZXJcIiksZD10aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZShcInRpbnltY2UudXRpbC5Ub29sc1wiKSxvPWZ1bmN0aW9uKCl7fSxmPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX0saT1mKCExKSx1PWYoITApLGE9ZnVuY3Rpb24oKXtyZXR1cm4gY30sYz0odD1mdW5jdGlvbih0KXtyZXR1cm4gdC5pc05vbmUoKX0se2ZvbGQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCgpfSxpczppLGlzU29tZTppLGlzTm9uZTp1LGdldE9yOm49ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGdldE9yVGh1bms6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdCgpfSxnZXRPckRpZTpmdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IodHx8XCJlcnJvcjogZ2V0T3JEaWUgY2FsbGVkIG9uIG5vbmUuXCIpfSxnZXRPck51bGw6ZihudWxsKSxnZXRPclVuZGVmaW5lZDpmKHVuZGVmaW5lZCksb3I6bixvclRodW5rOmUsbWFwOmEsZWFjaDpvLGJpbmQ6YSxleGlzdHM6aSxmb3JhbGw6dSxmaWx0ZXI6YSxlcXVhbHM6dCxlcXVhbHNfOnQsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybltdfSx0b1N0cmluZzpmKFwibm9uZSgpXCIpfSkscz1mdW5jdGlvbihuKXt2YXIgdD1mKG4pLGU9ZnVuY3Rpb24oKXtyZXR1cm4gb30scj1mdW5jdGlvbih0KXtyZXR1cm4gdChuKX0sbz17Zm9sZDpmdW5jdGlvbih0LGUpe3JldHVybiBlKG4pfSxpczpmdW5jdGlvbih0KXtyZXR1cm4gbj09PXR9LGlzU29tZTp1LGlzTm9uZTppLGdldE9yOnQsZ2V0T3JUaHVuazp0LGdldE9yRGllOnQsZ2V0T3JOdWxsOnQsZ2V0T3JVbmRlZmluZWQ6dCxvcjplLG9yVGh1bms6ZSxtYXA6ZnVuY3Rpb24odCl7cmV0dXJuIHModChuKSl9LGVhY2g6ZnVuY3Rpb24odCl7dChuKX0sYmluZDpyLGV4aXN0czpyLGZvcmFsbDpyLGZpbHRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdChuKT9vOmN9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm5bbl19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJzb21lKFwiK24rXCIpXCJ9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdC5pcyhuKX0sZXF1YWxzXzpmdW5jdGlvbih0LGUpe3JldHVybiB0LmZvbGQoaSxmdW5jdGlvbih0KXtyZXR1cm4gZShuLHQpfSl9fTtyZXR1cm4gb30sdj17c29tZTpzLG5vbmU6YSxmcm9tOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dHx8dD09PXVuZGVmaW5lZD9jOnModCl9fTtmdW5jdGlvbiBtKHQsZSl7cmV0dXJuIHkocC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHQsZSl9ZnVuY3Rpb24gaCh0KXt2YXIgZT1tKHQud2lkdGgsdC5oZWlnaHQpO3JldHVybiBnKGUpLmRyYXdJbWFnZSh0LDAsMCksZX1mdW5jdGlvbiBnKHQpe3JldHVybiB0LmdldENvbnRleHQoXCIyZFwiKX1mdW5jdGlvbiB5KHQsZSxuKXtyZXR1cm4gdC53aWR0aD1lLHQuaGVpZ2h0PW4sdH12YXIgdyxiLEksVD13aW5kb3cuUHJvbWlzZT93aW5kb3cuUHJvbWlzZTooYj0odz1mdW5jdGlvbih0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgdGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3XCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5vdCBhIGZ1bmN0aW9uXCIpO3RoaXMuX3N0YXRlPW51bGwsdGhpcy5fdmFsdWU9bnVsbCx0aGlzLl9kZWZlcnJlZHM9W10sTCh0LF8oVSx0aGlzKSxfKEEsdGhpcykpfSkuaW1tZWRpYXRlRm58fFwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5zZXRJbW1lZGlhdGUmJndpbmRvdy5zZXRJbW1lZGlhdGV8fGZ1bmN0aW9uKHQpe3Auc2V0VGltZW91dCh0LDEpfSxJPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0sdy5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKG51bGwsdCl9LHcucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24obixyKXt2YXIgbz10aGlzO3JldHVybiBuZXcgdyhmdW5jdGlvbih0LGUpe1IuY2FsbChvLG5ldyB4KG4scix0LGUpKX0pfSx3LmFsbD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCgxPT09dC5sZW5ndGgmJkkodFswXSk/dFswXTp0KTtyZXR1cm4gbmV3IHcoZnVuY3Rpb24obyxpKXtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIG8oW10pO3ZhciB1PWMubGVuZ3RoO2Z1bmN0aW9uIGEoZSx0KXt0cnl7aWYodCYmKFwib2JqZWN0XCI9PXR5cGVvZiB0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KSl7dmFyIG49dC50aGVuO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIHZvaWQgbi5jYWxsKHQsZnVuY3Rpb24odCl7YShlLHQpfSxpKX1jW2VdPXQsMD09LS11JiZvKGMpfWNhdGNoKHIpe2kocil9fWZvcih2YXIgdD0wO3Q8Yy5sZW5ndGg7dCsrKWEodCxjW3RdKX0pfSx3LnJlc29sdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yPT09dz9lOm5ldyB3KGZ1bmN0aW9uKHQpe3QoZSl9KX0sdy5yZWplY3Q9ZnVuY3Rpb24obil7cmV0dXJuIG5ldyB3KGZ1bmN0aW9uKHQsZSl7ZShuKX0pfSx3LnJhY2U9ZnVuY3Rpb24obyl7cmV0dXJuIG5ldyB3KGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAscj1vO248ci5sZW5ndGg7bisrKXJbbl0udGhlbih0LGUpfSl9LHcpO2Z1bmN0aW9uIF8odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFIocil7dmFyIG89dGhpcztudWxsIT09dGhpcy5fc3RhdGU/YihmdW5jdGlvbigpe3ZhciB0PW8uX3N0YXRlP3Iub25GdWxmaWxsZWQ6ci5vblJlamVjdGVkO2lmKG51bGwhPT10KXt2YXIgZTt0cnl7ZT10KG8uX3ZhbHVlKX1jYXRjaChuKXtyZXR1cm4gdm9pZCByLnJlamVjdChuKX1yLnJlc29sdmUoZSl9ZWxzZShvLl9zdGF0ZT9yLnJlc29sdmU6ci5yZWplY3QpKG8uX3ZhbHVlKX0pOnRoaXMuX2RlZmVycmVkcy5wdXNoKHIpfWZ1bmN0aW9uIFUodCl7dHJ5e2lmKHQ9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLlwiKTtpZih0JiYoXCJvYmplY3RcIj09dHlwZW9mIHR8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpKXt2YXIgZT10LnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSlyZXR1cm4gdm9pZCBMKF8oZSx0KSxfKFUsdGhpcyksXyhBLHRoaXMpKX10aGlzLl9zdGF0ZT0hMCx0aGlzLl92YWx1ZT10LEUuY2FsbCh0aGlzKX1jYXRjaChuKXtBLmNhbGwodGhpcyxuKX19ZnVuY3Rpb24gQSh0KXt0aGlzLl9zdGF0ZT0hMSx0aGlzLl92YWx1ZT10LEUuY2FsbCh0aGlzKX1mdW5jdGlvbiBFKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9kZWZlcnJlZHM7dDxlLmxlbmd0aDt0Kyspe3ZhciBuPWVbdF07Ui5jYWxsKHRoaXMsbil9dGhpcy5fZGVmZXJyZWRzPVtdfWZ1bmN0aW9uIHgodCxlLG4scil7dGhpcy5vbkZ1bGZpbGxlZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6bnVsbCx0aGlzLm9uUmVqZWN0ZWQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm51bGwsdGhpcy5yZXNvbHZlPW4sdGhpcy5yZWplY3Q9cn1mdW5jdGlvbiBMKHQsZSxuKXt2YXIgcj0hMTt0cnl7dChmdW5jdGlvbih0KXtyfHwocj0hMCxlKHQpKX0sZnVuY3Rpb24odCl7cnx8KHI9ITAsbih0KSl9KX1jYXRjaChvKXtpZihyKXJldHVybjtyPSEwLG4obyl9fWZ1bmN0aW9uIGoodCl7dmFyIGU9dC5zcmM7cmV0dXJuKDA9PT1lLmluZGV4T2YoXCJkYXRhOlwiKT9rOmZ1bmN0aW9uIG4ocil7cmV0dXJuIG5ldyBUKGZ1bmN0aW9uKHQsbil7dmFyIGU9bmV3IHAuWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKFwiR0VUXCIsciwhMCksZS5yZXNwb25zZVR5cGU9XCJibG9iXCIsZS5vbmxvYWQ9ZnVuY3Rpb24oKXsyMDA9PT10aGlzLnN0YXR1cyYmdCh0aGlzLnJlc3BvbnNlKX0sZS5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzO24oMD09PXRoaXMuc3RhdHVzPygodD1uZXcgRXJyb3IoXCJObyBhY2Nlc3MgdG8gZG93bmxvYWQgaW1hZ2VcIikpLmNvZGU9MTgsdC5uYW1lPVwiU2VjdXJpdHlFcnJvclwiLHQpOm5ldyBFcnJvcihcIkVycm9yIFwiK2Uuc3RhdHVzK1wiIGRvd25sb2FkaW5nIGltYWdlXCIpKX0sZS5zZW5kKCl9KX0pKGUpfWZ1bmN0aW9uIEMoYSl7cmV0dXJuIG5ldyBUKGZ1bmN0aW9uKHQsZSl7dmFyIG49cC5VUkwuY3JlYXRlT2JqZWN0VVJMKGEpLHI9bmV3IHAuSW1hZ2Usbz1mdW5jdGlvbigpe3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpKSxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHUpfTtmdW5jdGlvbiBpKCl7bygpLHQocil9ZnVuY3Rpb24gdSgpe28oKSxlKFwiVW5hYmxlIHRvIGxvYWQgZGF0YSBvZiB0eXBlIFwiK2EudHlwZStcIjogXCIrbil9ci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGkpLHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdSksci5zcmM9bixyLmNvbXBsZXRlJiZpKCl9KX1mdW5jdGlvbiBrKG4pe3JldHVybiBuZXcgVChmdW5jdGlvbih0LGUpeyhmdW5jdGlvbiBnKHQpe3ZhciBlPXQuc3BsaXQoXCIsXCIpLG49L2RhdGE6KFteO10rKS8uZXhlYyhlWzBdKTtpZighbilyZXR1cm4gdi5ub25lKCk7Zm9yKHZhciByPW5bMV0sbz1lWzFdLGk9cC5hdG9iKG8pLHU9aS5sZW5ndGgsYT1NYXRoLmNlaWwodS8xMDI0KSxjPW5ldyBBcnJheShhKSxzPTA7czxhOysrcyl7Zm9yKHZhciBmPTEwMjQqcyxsPU1hdGgubWluKDEwMjQrZix1KSxkPW5ldyBBcnJheShsLWYpLG09ZixoPTA7bTxsOysraCwrK20pZFtoXT1pW21dLmNoYXJDb2RlQXQoMCk7Y1tzXT1uZXcgVWludDhBcnJheShkKX1yZXR1cm4gdi5zb21lKG5ldyBwLkJsb2IoYyx7dHlwZTpyfSkpfSkobikuZm9sZChmdW5jdGlvbigpe2UoXCJ1cmkgaXMgbm90IGJhc2U2NDogXCIrbil9LHQpfSl9ZnVuY3Rpb24gTyh0LHIsbyl7cmV0dXJuIHI9cnx8XCJpbWFnZS9wbmdcIixwLkhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS50b0Jsb2I/bmV3IFQoZnVuY3Rpb24oZSxuKXt0LnRvQmxvYihmdW5jdGlvbih0KXt0P2UodCk6bigpfSxyLG8pfSk6ayh0LnRvRGF0YVVSTChyLG8pKX1mdW5jdGlvbiBQKHQpe3JldHVybiBDKHQpLnRoZW4oZnVuY3Rpb24odCl7IWZ1bmN0aW9uIG4odCl7cC5VUkwucmV2b2tlT2JqZWN0VVJMKHQuc3JjKX0odCk7dmFyIGU9bShmdW5jdGlvbiByKHQpe3JldHVybiB0Lm5hdHVyYWxXaWR0aHx8dC53aWR0aH0odCksZnVuY3Rpb24gbyh0KXtyZXR1cm4gdC5uYXR1cmFsSGVpZ2h0fHx0LmhlaWdodH0odCkpO3JldHVybiBnKGUpLmRyYXdJbWFnZSh0LDAsMCksZX0pfWZ1bmN0aW9uIFModCxlLG4pe3ZhciByPWUudHlwZTtmdW5jdGlvbiBvKGUsbil7cmV0dXJuIHQudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24gcih0LGUsbil7cmV0dXJuIGU9ZXx8XCJpbWFnZS9wbmdcIix0LnRvRGF0YVVSTChlLG4pfSh0LGUsbil9KX1yZXR1cm57Z2V0VHlwZTpmKHIpLHRvQmxvYjpmdW5jdGlvbiBpKCl7cmV0dXJuIFQucmVzb2x2ZShlKX0sdG9EYXRhVVJMOmYobiksdG9CYXNlNjQ6ZnVuY3Rpb24gdSgpe3JldHVybiBuLnNwbGl0KFwiLFwiKVsxXX0sdG9BZGp1c3RlZEJsb2I6ZnVuY3Rpb24gYShlLG4pe3JldHVybiB0LnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIE8odCxlLG4pfSl9LHRvQWRqdXN0ZWREYXRhVVJMOm8sdG9BZGp1c3RlZEJhc2U2NDpmdW5jdGlvbiBjKHQsZSl7cmV0dXJuIG8odCxlKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KFwiLFwiKVsxXX0pfSx0b0NhbnZhczpmdW5jdGlvbiBzKCl7cmV0dXJuIHQudGhlbihoKX19fWZ1bmN0aW9uIE4oZSl7cmV0dXJuIGZ1bmN0aW9uIHQobil7cmV0dXJuIG5ldyBUKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBwLkZpbGVSZWFkZXI7ZS5vbmxvYWRlbmQ9ZnVuY3Rpb24oKXt0KGUucmVzdWx0KX0sZS5yZWFkQXNEYXRhVVJMKG4pfSl9KGUpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIFMoUChlKSxlLHQpfSl9ZnVuY3Rpb24gTShlLHQpe3JldHVybiBPKGUsdCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gUyhULnJlc29sdmUoZSksdCxlLnRvRGF0YVVSTCgpKX0pfWZ1bmN0aW9uIEIoZSxuKXtyZXR1cm4gZS50b0NhbnZhcygpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uIGEodCxlLG4pe3ZhciByPW0odC53aWR0aCx0LmhlaWdodCksbz1nKHIpLGk9MCx1PTA7OTAhPT0obj1uPDA/MzYwK246bikmJjI3MCE9PW58fHkocixyLmhlaWdodCxyLndpZHRoKTs5MCE9PW4mJjE4MCE9PW58fChpPXIud2lkdGgpOzI3MCE9PW4mJjE4MCE9PW58fCh1PXIuaGVpZ2h0KTtyZXR1cm4gby50cmFuc2xhdGUoaSx1KSxvLnJvdGF0ZShuKk1hdGguUEkvMTgwKSxvLmRyYXdJbWFnZSh0LDAsMCksTShyLGUpfSh0LGUuZ2V0VHlwZSgpLG4pfSl9ZnVuY3Rpb24gRChlLG4pe3JldHVybiBlLnRvQ2FudmFzKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24gaSh0LGUsbil7dmFyIHI9bSh0LndpZHRoLHQuaGVpZ2h0KSxvPWcocik7XCJ2XCI9PT1uPyhvLnNjYWxlKDEsLTEpLG8uZHJhd0ltYWdlKHQsMCwtci5oZWlnaHQpKTooby5zY2FsZSgtMSwxKSxvLmRyYXdJbWFnZSh0LC1yLndpZHRoLDApKTtyZXR1cm4gTShyLGUpfSh0LGUuZ2V0VHlwZSgpLG4pfSl9dmFyIEYsSD0oRj1cImZ1bmN0aW9uXCIsZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0PT09Rn0pLHE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wLG89dC5sZW5ndGg7cjxvO3IrKyl7dmFyIGk9dFtyXTtpZihlKGkscikpcmV0dXJuIHYuc29tZShpKTtpZihuKGkscikpYnJlYWt9cmV0dXJuIHYubm9uZSgpfSh0LGUsaSl9LHo9ZnVuY3Rpb24odCl7cmV0dXJuIE4odCl9LCQ9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fHQ9PT11bmRlZmluZWQpdGhyb3cgbmV3IEVycm9yKFwiTm9kZSBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWRcIik7cmV0dXJue2RvbTpmKHQpfX0sRz17ZnJvbUh0bWw6ZnVuY3Rpb24odCxlKXt2YXIgbj0oZXx8cC5kb2N1bWVudCkuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihuLmlubmVySFRNTD10LCFuLmhhc0NoaWxkTm9kZXMoKXx8MTxuLmNoaWxkTm9kZXMubGVuZ3RoKXRocm93IHAuY29uc29sZS5lcnJvcihcIkhUTUwgZG9lcyBub3QgaGF2ZSBhIHNpbmdsZSByb290IG5vZGVcIix0KSxuZXcgRXJyb3IoXCJIVE1MIG11c3QgaGF2ZSBhIHNpbmdsZSByb290IG5vZGVcIik7cmV0dXJuICQobi5jaGlsZE5vZGVzWzBdKX0sZnJvbVRhZzpmdW5jdGlvbih0LGUpe3ZhciBuPShlfHxwLmRvY3VtZW50KS5jcmVhdGVFbGVtZW50KHQpO3JldHVybiAkKG4pfSxmcm9tVGV4dDpmdW5jdGlvbih0LGUpe3ZhciBuPShlfHxwLmRvY3VtZW50KS5jcmVhdGVUZXh0Tm9kZSh0KTtyZXR1cm4gJChuKX0sZnJvbURvbTokLGZyb21Qb2ludDpmdW5jdGlvbih0LGUsbil7dmFyIHI9dC5kb20oKTtyZXR1cm4gdi5mcm9tKHIuZWxlbWVudEZyb21Qb2ludChlLG4pKS5tYXAoJCl9fSxKPShcInVuZGVmaW5lZFwiIT10eXBlb2YgcC53aW5kb3c/cC53aW5kb3c6RnVuY3Rpb24oXCJyZXR1cm4gdGhpcztcIikoKSxIKHAuRWxlbWVudC5wcm90b3R5cGUuYXR0YWNoU2hhZG93KSYmSChwLk5vZGUucHJvdG90eXBlLmdldFJvb3ROb2RlKSxmdW5jdGlvbih0LGUpe3JldHVybiBuPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciBuPXQuZG9tKCk7aWYoMSE9PW4ubm9kZVR5cGUpcmV0dXJuITE7dmFyIHI9bjtpZihyLm1hdGNoZXMhPT11bmRlZmluZWQpcmV0dXJuIHIubWF0Y2hlcyhlKTtpZihyLm1zTWF0Y2hlc1NlbGVjdG9yIT09dW5kZWZpbmVkKXJldHVybiByLm1zTWF0Y2hlc1NlbGVjdG9yKGUpO2lmKHIud2Via2l0TWF0Y2hlc1NlbGVjdG9yIT09dW5kZWZpbmVkKXJldHVybiByLndlYmtpdE1hdGNoZXNTZWxlY3RvcihlKTtpZihyLm1vek1hdGNoZXNTZWxlY3RvciE9PXVuZGVmaW5lZClyZXR1cm4gci5tb3pNYXRjaGVzU2VsZWN0b3IoZSk7dGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlciBsYWNrcyBuYXRpdmUgc2VsZWN0b3JzXCIpfSh0LGUpfSxxKHQuZG9tKCkuY2hpbGROb2RlcyxmdW5jdGlvbih0KXtyZXR1cm4gbihHLmZyb21Eb20odCkpfSkubWFwKEcuZnJvbURvbSk7dmFyIG59KSxLPXRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKFwidGlueW1jZS51dGlsLkRlbGF5XCIpLFY9dGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoXCJ0aW55bWNlLnV0aWwuUHJvbWlzZVwiKSxXPXRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKFwidGlueW1jZS51dGlsLlVSSVwiKSxYPWZ1bmN0aW9uKHQpe3JldHVybiB0LmdldFBhcmFtKFwiaW1hZ2V0b29sc19wcm94eVwiKX07ZnVuY3Rpb24gUSh0KXt2YXIgZSxuO2Z1bmN0aW9uIHIodCl7cmV0dXJuL15bMC05XFwuXStweCQvLnRlc3QodCl9cmV0dXJuIGU9dC5zdHlsZS53aWR0aCxuPXQuc3R5bGUuaGVpZ2h0LGV8fG4/cihlKSYmcihuKT97dzpwYXJzZUludChlLDEwKSxoOnBhcnNlSW50KG4sMTApfTpudWxsOihlPXQud2lkdGgsbj10LmhlaWdodCxlJiZuP3t3OnBhcnNlSW50KGUsMTApLGg6cGFyc2VJbnQobiwxMCl9Om51bGwpfWZ1bmN0aW9uIFkodCl7cmV0dXJue3c6dC5uYXR1cmFsV2lkdGgsaDp0Lm5hdHVyYWxIZWlnaHR9fXZhciBaPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmdCE9PXVuZGVmaW5lZH0sdHQ9ZnVuY3Rpb24oZSxyLG8pe3JldHVybiBuZXcgVihmdW5jdGlvbih0KXt2YXIgbj1uZXcgcC5YTUxIdHRwUmVxdWVzdDtuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1uLnJlYWR5U3RhdGUmJnQoe3N0YXR1czpuLnN0YXR1cyxibG9iOnRoaXMucmVzcG9uc2V9KX0sbi5vcGVuKFwiR0VUXCIsZSwhMCksbi53aXRoQ3JlZGVudGlhbHM9byxkLmVhY2gocixmdW5jdGlvbih0LGUpe24uc2V0UmVxdWVzdEhlYWRlcihlLHQpfSksbi5yZXNwb25zZVR5cGU9XCJibG9iXCIsbi5zZW5kKCl9KX0sZXQ9W3tjb2RlOjQwNCxtZXNzYWdlOlwiQ291bGQgbm90IGZpbmQgSW1hZ2UgUHJveHlcIn0se2NvZGU6NDAzLG1lc3NhZ2U6XCJSZWplY3RlZCByZXF1ZXN0XCJ9LHtjb2RlOjAsbWVzc2FnZTpcIkluY29ycmVjdCBJbWFnZSBQcm94eSBVUkxcIn1dLG50PVt7dHlwZTpcImtleV9taXNzaW5nXCIsbWVzc2FnZTpcIlRoZSByZXF1ZXN0IGRpZCBub3QgaW5jbHVkZSBhbiBhcGkga2V5LlwifSx7dHlwZTpcImtleV9ub3RfZm91bmRcIixtZXNzYWdlOlwiVGhlIHByb3ZpZGVkIGFwaSBrZXkgY291bGQgbm90IGJlIGZvdW5kLlwifSx7dHlwZTpcImRvbWFpbl9ub3RfdHJ1c3RlZFwiLG1lc3NhZ2U6XCJUaGUgYXBpIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSByZXF1ZXN0IG9yaWdpbnMuXCJ9XSxydD1mdW5jdGlvbih0KXt2YXIgZSxuPShlPXQsXCJJbWFnZVByb3h5IEhUVFAgZXJyb3I6IFwiK3EoZXQsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmNvZGV9KS5mb2xkKGYoXCJVbmtub3duIEltYWdlUHJveHkgZXJyb3JcIiksZnVuY3Rpb24odCl7cmV0dXJuIHQubWVzc2FnZX0pKTtyZXR1cm4gVi5yZWplY3Qobil9LG90PWZ1bmN0aW9uKHQpe3ZhciBlLG4scj1mdW5jdGlvbih0KXt2YXIgZTt0cnl7ZT1KU09OLnBhcnNlKHQpfWNhdGNoKG4pe31yZXR1cm4gZX0odCksbz0oZT1bXCJlcnJvclwiLFwidHlwZVwiXS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gWih0KT90W2VdOnVuZGVmaW5lZH0sciksWihlKT9lOm51bGwpO3JldHVyblwiSW1hZ2VQcm94eSBTZXJ2aWNlIGVycm9yOiBcIisobz8obj1vLHEobnQsZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PW59KS5mb2xkKGYoXCJVbmtub3duIHNlcnZpY2UgZXJyb3JcIiksZnVuY3Rpb24odCl7cmV0dXJuIHQubWVzc2FnZX0pKTpcIkludmFsaWQgSlNPTiBpbiBzZXJ2aWNlIGVycm9yIG1lc3NhZ2VcIil9LGl0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHI9ZSxuZXcgVihmdW5jdGlvbihuKXt2YXIgdD1uZXcgcC5GaWxlUmVhZGVyO3Qub25sb2FkPWZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0O24oZS5yZXN1bHQpfSx0LnJlYWRBc1RleHQocil9KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPW90KHQpO3JldHVybiBWLnJlamVjdChlKX0pO3ZhciByfSx1dD1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIsXCJ0aW55LWFwaS1rZXlcIjplfTtyZXR1cm4gdHQoKHI9ZSxvPS0xPT09KG49dCkuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIsL1s/Jl1hcGlLZXk9Ly50ZXN0KG4pfHwhcj9uOm4rbytcImFwaUtleT1cIitlbmNvZGVVUklDb21wb25lbnQocikpLGksITEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RhdHVzPDIwMHx8MzAwPD10LnN0YXR1cz8oZT10LnN0YXR1cyxuPXQuYmxvYiw0MDA9PT0ocj1lKXx8NDAzPT09cnx8NTAwPT09cj9pdCgwLG4pOnJ0KGUpKTpWLnJlc29sdmUodC5ibG9iKTt2YXIgZSxuLHJ9KX07dmFyIGF0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT91dCh0LGUpOmZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gdHQodCx7fSxlKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnN0YXR1czwyMDB8fDMwMDw9dC5zdGF0dXM/cnQodC5zdGF0dXMpOlYucmVzb2x2ZSh0LmJsb2IpfSl9KHQsbil9LGN0PTAsc3Q9ZnVuY3Rpb24odCl7cmV0dXJuIEooRy5mcm9tRG9tKHQpLFwiaW1nXCIpfSxmdD1mdW5jdGlvbih0LGUpe3JldHVybiB0LmRvbS5pcyhlLFwiZmlndXJlXCIpfSxsdD1mdW5jdGlvbihuLHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiBlPXQsbi5kb20uaXMoZSxcImltZzpub3QoW2RhdGEtbWNlLW9iamVjdF0sW2RhdGEtbWNlLXBsYWNlaG9sZGVyXSlcIikmJihodChuLHQpfHxndChuLHQpfHxYKG4pKTt2YXIgZX07cmV0dXJuIGZ0KG4sdCk/c3QodCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZG9tKCkpP3Yuc29tZSh0LmRvbSgpKTp2Lm5vbmUoKX0pOmUodCk/di5zb21lKHQpOnYubm9uZSgpfSxkdD1mdW5jdGlvbih0LGUpe3Qubm90aWZpY2F0aW9uTWFuYWdlci5vcGVuKHt0ZXh0OmUsdHlwZTpcImVycm9yXCJ9KX0sbXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb24uZ2V0Tm9kZSgpO3JldHVybiBmdCh0LGUpP3N0KGUpOnYuc29tZShHLmZyb21Eb20oZSkpfSxodD1mdW5jdGlvbih0LGUpe3ZhciBuPWUuc3JjO3JldHVybiAwPT09bi5pbmRleE9mKFwiZGF0YTpcIil8fDA9PT1uLmluZGV4T2YoXCJibG9iOlwiKXx8bmV3IFcobikuaG9zdD09PXQuZG9jdW1lbnRCYXNlVVJJLmhvc3R9LGd0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuLTEhPT1kLmluQXJyYXkodC5nZXRQYXJhbShcImltYWdldG9vbHNfY29yc19ob3N0c1wiLFtdLFwic3RyaW5nW11cIiksbmV3IFcoZS5zcmMpLmhvc3QpfSxwdD1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHU9ZS5zcmM7cmV0dXJuIGd0KHQsZSk/YXQoZS5zcmMsbnVsbCwocj10LG89ZSwtMSE9PWQuaW5BcnJheShyLmdldFBhcmFtKFwiaW1hZ2V0b29sc19jcmVkZW50aWFsc19ob3N0c1wiLFtdLFwic3RyaW5nW11cIiksbmV3IFcoby5zcmMpLmhvc3QpKSk6aHQodCxlKT9qKGUpOih1PVgodCksdSs9KC0xPT09dS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrXCJ1cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGUuc3JjKSxuPShpPXQpLmdldFBhcmFtKFwiYXBpX2tleVwiLGkuZ2V0UGFyYW0oXCJpbWFnZXRvb2xzX2FwaV9rZXlcIixcIlwiLFwic3RyaW5nXCIpLFwic3RyaW5nXCIpLGF0KHUsbiwhMSkpfSx2dD1mdW5jdGlvbih0LGUpe3JldHVybiBuPXQsdi5mcm9tKG4uZ2V0UGFyYW0oXCJpbWFnZXRvb2xzX2ZldGNoX2ltYWdlXCIsbnVsbCxcImZ1bmN0aW9uXCIpKS5mb2xkKGZ1bmN0aW9uKCl7cmV0dXJuIHB0KHQsZSl9LGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSk7dmFyIG59LHl0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5lZGl0b3JVcGxvYWQuYmxvYkNhY2hlLmdldEJ5VXJpKGUuc3JjKTtyZXR1cm4gbj9WLnJlc29sdmUobi5ibG9iKCkpOnZ0KHQsZSl9LHd0PWZ1bmN0aW9uKHQpe0suY2xlYXJUaW1lb3V0KHQuZ2V0KCkpfSxidD1mdW5jdGlvbihhLGMscyxmLGwsZCl7cmV0dXJuIGMudG9CbG9iKCkudGhlbihmdW5jdGlvbih0KXt2YXIgZSxuLG8scixpLHU9YS5lZGl0b3JVcGxvYWQuYmxvYkNhY2hlO3JldHVybiBlPWwuc3JjLGEuZ2V0UGFyYW0oXCJpbWFnZXNfcmV1c2VfZmlsZW5hbWVcIiwhMSxcImJvb2xlYW5cIikmJihuPShvPXUuZ2V0QnlVcmkoZSkpPyhlPW8udXJpKCksby5uYW1lKCkpOihyPWEsKGk9ZS5tYXRjaCgvXFwvKFteXFwvXFw/XSspP1xcLig/OmpwZWd8anBnfHBuZ3xnaWYpKD86XFw/fCQpL2kpKT9yLmRvbS5lbmNvZGUoaVsxXSk6bnVsbCkpLG89dS5jcmVhdGUoe2lkOlwiaW1hZ2V0b29sc1wiK2N0KyssYmxvYjp0LGJhc2U2NDpjLnRvQmFzZTY0KCksdXJpOmUsbmFtZTpufSksdS5hZGQobyksYS51bmRvTWFuYWdlci50cmFuc2FjdChmdW5jdGlvbigpe2EuJChsKS5vbihcImxvYWRcIixmdW5jdGlvbiByKCl7dmFyIHQsZSxuO2EuJChsKS5vZmYoXCJsb2FkXCIsciksYS5ub2RlQ2hhbmdlZCgpLHM/YS5lZGl0b3JVcGxvYWQudXBsb2FkSW1hZ2VzQXV0bygpOih3dChmKSx0PWEsZT1mLG49Sy5zZXRFZGl0b3JUaW1lb3V0KHQsZnVuY3Rpb24oKXt0LmVkaXRvclVwbG9hZC51cGxvYWRJbWFnZXNBdXRvKCl9LHQuZ2V0UGFyYW0oXCJpbWFnZXNfdXBsb2FkX3RpbWVvdXRcIiwzZTQsXCJudW1iZXJcIikpLGUuc2V0KG4pKX0pLGQmJmEuJChsKS5hdHRyKHt3aWR0aDpkLncsaGVpZ2h0OmQuaH0pLGEuJChsKS5hdHRyKHtzcmM6by5ibG9iVXJpKCl9KS5yZW1vdmVBdHRyKFwiZGF0YS1tY2Utc3JjXCIpfSksb30pfSxJdD1mdW5jdGlvbihuLHIsdCxvKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbXQobikuZm9sZChmdW5jdGlvbigpe2R0KG4sXCJDb3VsZCBub3QgZmluZCBzZWxlY3RlZCBpbWFnZVwiKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG4uX3NjYW5Gb3JJbWFnZXMoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHl0KG4sZS5kb20oKSl9KS50aGVuKHopLnRoZW4odCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gYnQobix0LCExLHIsZS5kb20oKSxvKX0sZnVuY3Rpb24odCl7ZHQobix0KX0pfSl9fSxUdD1mdW5jdGlvbihlLG4scil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9bXQoZSkuZm9sZChmdW5jdGlvbigpe3JldHVybiBudWxsfSxmdW5jdGlvbih0KXt2YXIgZT1RKHQuZG9tKCkpO3JldHVybiBlP3t3OmUuaCxoOmUud306bnVsbH0pO3JldHVybiBJdChlLG4sZnVuY3Rpb24odCl7cmV0dXJuIEIodCxyKX0sdCkoKX19LF90PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gSXQodCxlLGZ1bmN0aW9uKHQpe3JldHVybiBEKHQsbil9KSgpfX0sUnQ9ZnVuY3Rpb24oZSxuLHIsaSx1KXtyZXR1cm4gQyh1KS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPVkodCk7cmV0dXJuIGkudz09PWUudyYmaS5oPT09ZS5ofHxRKHIpJiZmdW5jdGlvbiBvKHQsZSl7dmFyIG4scjtlJiYobj10LnN0eWxlLndpZHRoLHI9dC5zdHlsZS5oZWlnaHQsKG58fHIpJiYodC5zdHlsZS53aWR0aD1lLncrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PWUuaCtcInB4XCIsdC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLW1jZS1zdHlsZVwiKSksbj10LndpZHRoLHI9dC5oZWlnaHQsKG58fHIpJiYodC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGUudyksdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixlLmgpKSl9KHIsZSkscC5VUkwucmV2b2tlT2JqZWN0VVJMKHQuc3JjKSx1fSkudGhlbih6KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBidChlLHQsITAsbixyKX0sZnVuY3Rpb24oKXt9KX0sVXQ9ZnVuY3Rpb24oaSx1KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1tdChpKSxvPXIubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBZKHQuZG9tKCkpfSk7bXQoaSkuZWFjaChmdW5jdGlvbihlKXtsdChpLGUuZG9tKCkpLmVhY2goZnVuY3Rpb24odCl7eXQoaSxlLmRvbSgpKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlLG49e2Jsb2I6ZT10LHVybDpwLlVSTC5jcmVhdGVPYmplY3RVUkwoZSl9O2kud2luZG93TWFuYWdlci5vcGVuKHt0aXRsZTpcIkVkaXQgSW1hZ2VcIixzaXplOlwibGFyZ2VcIixib2R5Ont0eXBlOlwicGFuZWxcIixpdGVtczpbe3R5cGU6XCJpbWFnZXRvb2xzXCIsbmFtZTpcImltYWdldG9vbHNcIixsYWJlbDpcIkVkaXQgSW1hZ2VcIixjdXJyZW50U3RhdGU6bn1dfSxidXR0b25zOlt7dHlwZTpcImNhbmNlbFwiLG5hbWU6XCJjYW5jZWxcIix0ZXh0OlwiQ2FuY2VsXCJ9LHt0eXBlOlwic3VibWl0XCIsbmFtZTpcInNhdmVcIix0ZXh0OlwiU2F2ZVwiLHByaW1hcnk6ITAsZGlzYWJsZWQ6ITB9XSxvblN1Ym1pdDpmdW5jdGlvbih0KXt2YXIgbj10LmdldERhdGEoKS5pbWFnZXRvb2xzLmJsb2I7ci5lYWNoKGZ1bmN0aW9uKGUpe28uZWFjaChmdW5jdGlvbih0KXtSdChpLHUsZS5kb20oKSx0LG4pfSl9KSx0LmNsb3NlKCl9LG9uQ2FuY2VsOmZ1bmN0aW9uKCl7fSxvbkFjdGlvbjpmdW5jdGlvbih0LGUpe3N3aXRjaChlLm5hbWUpe2Nhc2VcInNhdmUtc3RhdGVcIjplLnZhbHVlP3QuZW5hYmxlKFwic2F2ZVwiKTp0LmRpc2FibGUoXCJzYXZlXCIpO2JyZWFrO2Nhc2VcImRpc2FibGVcIjp0LmRpc2FibGUoXCJzYXZlXCIpLHQuZGlzYWJsZShcImNhbmNlbFwiKTticmVhaztjYXNlXCJlbmFibGVcIjp0LmVuYWJsZShcImNhbmNlbFwiKX19fSl9KX0pfSl9fTshZnVuY3Rpb24gQXQoKXtyLmFkZChcImltYWdldG9vbHNcIixmdW5jdGlvbih0KXt2YXIgbixlLHIsbyxpLHUsYSxjLHM9bCgwKSxmPWwobnVsbCk7bj10LGU9cyxkLmVhY2goe21jZUltYWdlUm90YXRlTGVmdDpUdChuLGUsLTkwKSxtY2VJbWFnZVJvdGF0ZVJpZ2h0OlR0KG4sZSw5MCksbWNlSW1hZ2VGbGlwVmVydGljYWw6X3QobixlLFwidlwiKSxtY2VJbWFnZUZsaXBIb3Jpem9udGFsOl90KG4sZSxcImhcIiksbWNlRWRpdEltYWdlOlV0KG4sZSl9LGZ1bmN0aW9uKHQsZSl7bi5hZGRDb21tYW5kKGUsdCl9KSxvPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiByLmV4ZWNDb21tYW5kKHQpfX0sKHI9dCkudWkucmVnaXN0cnkuYWRkQnV0dG9uKFwicm90YXRlbGVmdFwiLHt0b29sdGlwOlwiUm90YXRlIGNvdW50ZXJjbG9ja3dpc2VcIixpY29uOlwicm90YXRlLWxlZnRcIixvbkFjdGlvbjpvKFwibWNlSW1hZ2VSb3RhdGVMZWZ0XCIpfSksci51aS5yZWdpc3RyeS5hZGRCdXR0b24oXCJyb3RhdGVyaWdodFwiLHt0b29sdGlwOlwiUm90YXRlIGNsb2Nrd2lzZVwiLGljb246XCJyb3RhdGUtcmlnaHRcIixvbkFjdGlvbjpvKFwibWNlSW1hZ2VSb3RhdGVSaWdodFwiKX0pLHIudWkucmVnaXN0cnkuYWRkQnV0dG9uKFwiZmxpcHZcIix7dG9vbHRpcDpcIkZsaXAgdmVydGljYWxseVwiLGljb246XCJmbGlwLXZlcnRpY2FsbHlcIixvbkFjdGlvbjpvKFwibWNlSW1hZ2VGbGlwVmVydGljYWxcIil9KSxyLnVpLnJlZ2lzdHJ5LmFkZEJ1dHRvbihcImZsaXBoXCIse3Rvb2x0aXA6XCJGbGlwIGhvcml6b250YWxseVwiLGljb246XCJmbGlwLWhvcml6b250YWxseVwiLG9uQWN0aW9uOm8oXCJtY2VJbWFnZUZsaXBIb3Jpem9udGFsXCIpfSksci51aS5yZWdpc3RyeS5hZGRCdXR0b24oXCJlZGl0aW1hZ2VcIix7dG9vbHRpcDpcIkVkaXQgaW1hZ2VcIixpY29uOlwiZWRpdC1pbWFnZVwiLG9uQWN0aW9uOm8oXCJtY2VFZGl0SW1hZ2VcIiksb25TZXR1cDpmdW5jdGlvbihuKXt2YXIgdD1mdW5jdGlvbigpe210KHIpLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9bHQocix0LmRvbSgpKS5pc05vbmUoKTtuLnNldERpc2FibGVkKGUpfSl9O3JldHVybiByLm9uKFwiTm9kZUNoYW5nZVwiLHQpLGZ1bmN0aW9uKCl7ci5vZmYoXCJOb2RlQ2hhbmdlXCIsdCl9fX0pLHIudWkucmVnaXN0cnkuYWRkQnV0dG9uKFwiaW1hZ2VvcHRpb25zXCIse3Rvb2x0aXA6XCJJbWFnZSBvcHRpb25zXCIsaWNvbjpcImltYWdlLW9wdGlvbnNcIixvbkFjdGlvbjpvKFwibWNlSW1hZ2VcIil9KSxyLnVpLnJlZ2lzdHJ5LmFkZENvbnRleHRNZW51KFwiaW1hZ2V0b29sc1wiLHt1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIGx0KHIsdCkuZm9sZChmdW5jdGlvbigpe3JldHVybltdfSxmdW5jdGlvbih0KXtyZXR1cm5be3RleHQ6XCJFZGl0IGltYWdlXCIsaWNvbjpcImVkaXQtaW1hZ2VcIixvbkFjdGlvbjpvKFwibWNlRWRpdEltYWdlXCIpfV19KX19KSwoaT10KS51aS5yZWdpc3RyeS5hZGRDb250ZXh0VG9vbGJhcihcImltYWdldG9vbHNcIix7aXRlbXM6aS5nZXRQYXJhbShcImltYWdldG9vbHNfdG9vbGJhclwiLFwicm90YXRlbGVmdCByb3RhdGVyaWdodCBmbGlwdiBmbGlwaCBlZGl0aW1hZ2UgaW1hZ2VvcHRpb25zXCIpLHByZWRpY2F0ZTpmdW5jdGlvbih0KXtyZXR1cm4gbHQoaSx0KS5pc1NvbWUoKX0scG9zaXRpb246XCJub2RlXCIsc2NvcGU6XCJub2RlXCJ9KSxhPXMsYz1mLCh1PXQpLm9uKFwiTm9kZUNoYW5nZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPWMuZ2V0KCk7ZSYmZS5zcmMhPT10LmVsZW1lbnQuc3JjJiYod3QoYSksdS5lZGl0b3JVcGxvYWQudXBsb2FkSW1hZ2VzQXV0bygpLGMuc2V0KG51bGwpKSxsdCh1LHQuZWxlbWVudCkuZWFjaChjLnNldCl9KX0pfSgpfSh3aW5kb3cpOyJdLCJzb3VyY2VSb290IjoiIn0=